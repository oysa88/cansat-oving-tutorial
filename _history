{"entries":[{"timestamp":1770045025961,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":185,"diffs":[[1,"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":33,"diffs":[[1,"\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":220,"length1":50,"diffs":[[1,"        \"README.md\"\n"]]},{"start1":247,"length1":31,"diffs":[[1,"    \"additionalFilePaths\": []\n"]]}]}]},{"timestamp":1770128051657,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":2,"length1":37,"diffs":[[1,"    \"name\": \"CanSat Øving Tutorial NY\",\n"]]}]}]},{"timestamp":1770128102182,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":237,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\"></block></xml>"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":274,"length1":44,"diffs":[[1,""]]}]},{"type":"added","filename":"test.ts","value":"// testene settes inn her; disse vil ikke kompilert så lenge denne pakken blir brukt som en utvidelse.\n"}]}],"snapshots":[{"timestamp":1770045025960,"editorVersion":"8.0.18","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"CanSat Øving Tutorial NY\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1770104528808,"editorVersion":"8.0.18","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\"></block></xml>","main.ts":"basic.forever(function () {\n\t\n})\n","README.md":"","cansat-tutorial.md":"# CanSat Øvinger Tutorial\n\n### @diffs true\n### @unifiedToolbox true\n\n<!-- Del 1: -->\n\n## CanSat Øvingsoppgaver @unplugged\n\nI denne veiledningen skal vi gå gjennom grunnleggende funksjoner som dere får bruk for når dere skal programmere en CanSat. \n\n**Oppgaver dere skal løse er: **\n\n**1)** Få et LED-lys til å blinke ved koble det til pins på micro:bit\n\n**2)** Lage en teller som teller fra 10 til 0, og så skrur på LED-lyset i 5 sekunder.\n\n**3)** Bruke en OLED-skjerm, og vise nedtellingen på skjermen.\n\n**4)** Lage et voltmeter som skriver spenningen til OLED-skjermen.\n\n**5)** Lese analogverdi fra en TMP36 (Temperatursensor) og konvertere disse til temperatur vi viser på OLED-skjermen.\n\n**6)** Koble til en BMP280 sensor, les av lufttrykk og skriv det på OLED-skjerm.\n\n**7)** Regne om barometrisk lufttrykk til relativ høyde på CanSat.\n\n**8)** Sende data mellom 2 micro:bit og lagre de i en datalogger\n\n#### **Lykke til!**\n\n\n<!-- Del 1.1: -->\n\n## Oppgave 1 - Koble LED-lys til CanSat @unplugged\n\nKoble opp kretsen som vist på bildet under.\n\nNB: Koble pluss på LED til inngangen P0 og minus til jord (GND).\n\n![microbit_øvelse_1_LED_liten.jpg](https://i.postimg.cc/KYqc9mtM/microbit_øvelse_1_LED_liten.jpg)\n\n\n<!-- Del 1.2: -->\n\n## Oppgave 1: Få LED-lyset til å skru seg AV og PÅ én gang hvert sekund.\n\nInni ``||basic: gjenta for alltid||``:\n\nFinn blokken ``||pins: skriv digital til||`` som vi skal bruke for å skru AV og PÅ LED-lyset vi har koblet til CanSat. Sett verdien til 1 for å skru lyset PÅ og 0 for å skru det AV.\n\nBruk en ``||basic: pause||`` for å si hvor lenge lyset skal være PÅ og AV.\n\n**Ekstra**: Endre hvor fort LED-lyset blinker ved å justere på tiden i ``||basic: pause||``-blokken.\n\n**HINT**: 1000 ms i ett sekund\n\n\n```blocks\nbasic.forever(function () {\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(500)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n    basic.pause(500)\n}\n```\n\n<!-- Del 2.1: -->\n\n## Oppgave 2: Telle fra 10 til 0\n\n**Når man skal lage store koder, er det vanlig å bruke ``||functions: funksjoner||``. Inni funksjonen bygger vi koden for det vi vil den skal utføre, og så kaller vi den opp når vi trenger den.**\n\nStart med å lage funksjonen ``||functions: nedtelling||``:\n\nFor å kunne telle nedover, trenger vi en variabel som kan huske tallet vår. Variabler er noe vi bruker for å at koden vår skal kunne *huske* verdiene vi jobber med. Lag en ny variabel: ``||variables: teller ||``. Plasser blokken ``||variables: sett teller til 10 ||`` inni ``||functions: nedtelling||``.\n\nSiden vi skal telle ned fra 10 til 0, bruker vi en ``||loops: FOR-løkke ||`` som lar oss gjenta løkken akkurat så mange ganger vi ønsker. \n\nSett ``||loops: gjenta for indeks ||`` til å kjøres **fra 0 til 10**.\n\nInni ``||loops: gjenta for indeks ||`` skal vi bruke en ``||basic: vis tall ||`` til å vise ``||variables: teller ||``. Og for hver gang den har vist tallet, ``||variables: endre teller med -1 ||``.\n\nHusk å kjøre ``||functions: nedtelling||`` fra ``||basic: ved start||``. Denne blokken brukes for å si når funksjonen skal kjøres.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n}\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 2.2: -->\n\n## Oppgave 2: Få LED-lys til å lyse i 5 sek.\n\nFor å få LED til å lyse i 5 sek, kan vi flytte blokkene vi har i ``||basic: gjenta for alltid ||``, over til ``||functions: nedtelling ||``. \n\nEndre ``||basic: pause ||``  mellom LED PÅ og AV til 5000 ms. *(Fjern ``||basic: pause ||`` etter ``||pins: skriv digital P0 til 0||``.)*\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 2.3: -->\n\n## Oppgave 2: Bestemme når nedtelling skal starte\n\n``||functions: Funksjonen nedtelling||`` kjører når vi starter micro:biten. Hvis vi vil at den skal kjøres på nytt, kan vi f.eks. kalle den opp når vi ``||input: trykker på knapp A||``.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\ninput.onButtonPressed(Button.A, function () {\n    nedtelling()\n})\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 3: -->\n\n## Oppgave 3: Skriv til OLED-skjerm @unplugged\n\nNå skal vi se på hvordan vi kan bruke en Kitronik OLED-skjerm for å bedre vise dataene våre. \n\nSkjermen skal kobles til mellom CanSat og micro:bit.\n\n![OLED_Kitronik_liten.jpg](https://i.postimg.cc/mD2ry8kJ/OLED_Kitronik_liten.jpg)\n\n\n<!-- Del 3.1: -->\n\n## Oppgave 3: Sette opp OLED-skjerm\n\nFra biblioteket ``||kitronik_VIEW128x64: OLED-skjerm||``, hent blokkene ``||kitronik_VIEW128x64: skru AV OLED-skjerm||`` og ``||kitronik_VIEW128x64: Sett font størrelse til Normal||``. \n\nPlasser begge blokkene inn i ``||basic: ved start||``, og sett OLED-skjerm til ``||kitronik_VIEW128x64: PÅ||`` og sett font til ``||kitronik_VIEW128x64: Stor||``.\n\n```blocks\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Big)\n```\n\n\n<!-- Del 3.2: -->\n\n## Oppgave 3: Vise nedtelling på OLED-skjermen\n\nFjern blokken ``||basic: vis tall||`` ``||variables: teller||`` fra  funksjonen ``||functions: nedtelling||``. \n\nFor å vise noe på skjermen, bruk blokken ``||kitronik_VIEW128x64: vis ||``. Trykk på pluss(+) for å utvide blokken. Sett linjevalg til 1.\n\nInni ``||kitronik_VIEW128x64: vis||``, vis ``||variables: teller||`` ``||kitronik_VIEW128x64: på linje 1||``.\n\nFor å sørge for at skjermen alltid viser riktig verdi, må vi hele tiden oppdatere OLED-skjermen. Vi må derfor plassere``||kitronik_VIEW128x64: fjerne alt på skjermen||`` inni ``||basic: gjenta for alltid||``.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        kitronik_VIEW128x64.show(teller, 1)\n        teller += -1\n        basic.pause(1000)\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\ninput.onButtonPressed(Button.A, function () {\n    nedtelling()\n})\nlet teller = 0\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Big)\nnedtelling()\nbasic.forever(function () {\n\tkitronik_VIEW128x64.refresh()\n})\n\n\n```\n\n\n<!-- Del 4: -->\n\n## Oppgave 4: Lage et voltmeter @unplugged\n\nAlle sensorene vi skal koble til CanSat'en, gir oss en analog verdi. Denne verdien må vi først regne om til en spenningsverdi, og så videre til den faktiske verdien vi kan bruke. \n\nVi må derfor lære hvordan man konverterer den analoge verdien vi får inn på micro:biten til en spenningsverdi.\n\n\n<!-- Del 4.1: -->\n\n## Oppgave 4: Lagre analog verdi på micro:biten\n\nStart med å lage en ny funksjon: ``||functions: voltmeter||``.\n\nInni ``||functions: voltmeter||`` skal vi lage en ny variabel: ``||variables: analogVerdi||``. Sett ``||variables: analogVerdi||`` til å ``||pins: lese analog verdi fra P0||``.\n\n```blocks\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n```\n\n<!-- Del 4.2: -->\n\n## Oppgave 4: Vise analog verdi på OLED-skjermen\n\nInni funksjonen ``||functions: voltmeter||`` skal vi vise den analoge verdien vi får fra P0. \n\nFor å vise noe på skjermen, bruk blokken ``||kitronik_VIEW128x64: show ||``. Trykk på pluss(+) for å utvide blokken. Sett linjevalg til 1.\n\nFor å kunne vise både tekst og en variabel på samme linje, må vi hente ``||text: sett sammen ||`` fra biblioteket ``||text: Tekst ||``. Sett blokken inni ``||kitronik_VIEW128x64: show ||``.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Analog: \". I den andre ruta, sette inn variabelen ``||variables: analogVerdi||``.\n\nFor å få programmet vårt til å kjøre funksjonen vi har laget, må vi legge inn blokken ``||functions: kjør voltmeter||`` inne fra ``||basic: gjenta for alltid||``. Gjør det samme for alle funksjonene du skal lage, hvis ikke annet er oppgitt. \n\n\n```blocks\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n```\n\n\n<!-- Del 4.3: -->\n\n## Oppgave 4: Bestemme verdi på Uref\n\nLage en ny variabel: ``||variables: Uref||``.\n\n``||variables: Uref||`` skal settes inn i ``||basic: ved start||`` . Verdien vi skriver inn her er avhengig av om CanSat får strøm fra USB eller batteri.\n\nSe tabell under for hva ``||variables: Uref||`` skal være :\n\n|   **  Spenning fra USB  **   | |   **  Spenning fra batteri  **   |\n| :------------: | | :------------: |\n| 3.2 | | 3.0 |\n\n```blocks\nlet Uref = 0\nUref = 3.2\n```\n\n\n<!-- Del 4.4: -->\n\n## Oppgave 4: Beregne spenning fra analog verdi\n\nVi har nå fått en analog verdi vi kan bruke for å regne ut spenningen over sensoren. For å gjøre dette, lage en ny variabel: ``||variables: spenning||``.\n\nBruk denne formelen for å sette ``||variables: spenning||`` til ( ``||variables: analogverdi||`` / 1024 ) * ``||variables: Uref||``.\n\n\n![Formel_spenning_fra_analogverdi_liten.png](https://i.postimg.cc/YSn2XtQv/Formel_spenning_fra_analogverdi_liten.png)\n\n```blocks\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = analogVerdi / 1024 * Uref\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    basic.pause(500)\n}\n```\n\n\n<!-- Del 4.5: -->\n\n## Oppgave 4: Vis spenningsverdi på OLED-skjerm\n\nVi skal gjøre det samme som vi gjorde for å vise den analoge verdien på OLED-skjermen:\n\nHente ``||text: sett sammen ||`` fra biblioteket ``||text: Tekst ||``. Sett blokken inni en ny ``||kitronik_VIEW128x64: show ||``. Utvid blokken og endre til å skrive på linje 2.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Spenning: \". I den andre ruta, sette inn variabelen ``||variables: spenning||``. Utvid til en tredje rute hvor du skriver \" V\".\n\n**Bonus:** Endre skriftstørrelse på OLED-skjerm til ``||kitronik_VIEW128x64: Normal ||``.\n\n```blocks\nlet spenning = 0\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = analogVerdi / 1024 * Uref\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n    basic.pause(500)\n}\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\n```\n\n\n<!-- Del 4.6: -->\n\n## Oppgave 4: Runde av spenningsverdi\n\nNår du testet koden din, så du kanskje at det ble mange desimaler. Vi har ingen blokk som lar oss direkte avrunde til 2 desimaler. Derfor må vi multiplisere verdien vi har fått med 100, og deretter ``||math: avrund ||`` ``||variables: spenning||``. Det gir oss et heltall som er 100 ganger for stort. Hvis vi nå deler det nye tallet vårt på 100, vil vi få riktig tall, og ha flyttet kommategnet 2 plasser oppover slik at vi får en verdi med 2 desimaler.\n\nVi skal endre utregningen for variabelen ``||variables: spenning ||``. Formelen blir seende slik ut vi setter ``||variables: spenning ||`` til ``||math: avrund||`` ( ``||variables: analogVerdi||`` ``||math: / ||`` 1024 ``||math: *||`` ``||variables: Uref ||`` ``||math: *||`` 100 ) ``||math: / ||`` 100\n\n```blocks\nlet spenning = 0\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = Math.round(analogVerdi / 1024 * Uref * 100) / 100\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n    basic.pause(500)\n}\n```\n\n\n<!-- Del 5: -->\n\n## Oppgave 5: Lage et termometer med TMP36 @unplugged\n\nI denne oppgaven skal vi finne temperaturen fra en TMP36 temperatursensor. \n\nKoble opp kretsen på bildet under:\n\n![Oppgave_5_TMP36_Oppkobling_liten.png](https://i.postimg.cc/Jh67TRjX/Oppgave_5_TMP36_Oppkobling_liten.png)\n\n\n<!-- Del 5.1: -->\n\n## Oppgave 5: Regne om spenningsverdi til temperatur\n\nVi skal lage en ny funksjon: ``||functions: termometer||``.\n\nInne ``||functions: termometer||``, lage en ny variabel: ``||variables: temperatur||``.\n\nBruk denne formelen for å sette ``||variables: temperatur||`` til ( ``||variables: spenning||`` - 0.5 ) / 0.01\n\n```blocks\nfunction termometer () {\n    temperatur = (spenning - 0.5) / 0.01\n}\n```\n\n<!-- Del 5.2: -->\n\n## Oppgave 5: Vise termometer på OLED-skjerm\n\n Plasser en ``||text: sett sammen ||`` inni en ny ``||kitronik_VIEW128x64: show ||``. Utvid blokken og endre til å skrive på linje 3.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Temperatur: \". I den andre ruta, sette inn variabelen ``||variables: temperatur||``. Utvid til en tredje rute hvor du skriver \" C\".\n\nKall opp funksjonen ``||functions: termometer||`` fra ``||basic: gjenta for alltid||``, og flytt ``||basic: pause 500 ms||`` fra ``||functions: voltmeter||`` til ``||basic: gjenta for alltid||``.\n\n```blocks\nfunction termometer () {\n    temperatur = (spenning - 0.5) / 0.01\n    kitronik_VIEW128x64.show(\"Temperatur: \" + temperatur + \" C\", 3)\n}\nbasic.forever(function () {\n    voltmeter()\n    termometer()\n    basic.pause(500)\n})\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = Math.trunc(analogVerdi / 1024 * Uref * 100) / 100\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n}\n```\n\n<!-- Del 6: -->\n\n## Oppgave 6: Lag et barometer @unplugged\n\n#### Vi skal bruke en ``||BMP280: BMP280||`` sensor. \n\n![BME280.png](https://i.postimg.cc/ZYjVtVRH/BME280.png)\n\nDenne sensoren kan måle:\n\n- Temperatur\n- Trykk\n- Luftfuktighet\n- Duggpunkt\n\nFor å lage et barometer skal vi bruke ``||BMP280: trykk||``.\n\n\n<!-- Del 6.1: -->\n\n## Oppgave 6: Koble opp og lese av fra BME280\n\nFor å få BME280 til å snakke med CanSat, skal vi sette opp to blokken inn i ``||basic: ved start||`` fra biblioteket ``||BMP280: BMP280||``:\n\n- ``||BME280: Power On||``\n- ``||BME280: set address 0x76||``\n\nVidere, lage en ny funksjon: ``||functions: BMP280_sensor||``.\n\nInne ``||functions: BME280_sensor||``, sett opp en ny variabel: ``||variables: trykk||``. Sett ``||variables: trykk||`` til ``||BME280: pressure||`` (fra biblioteket BME280).\n\n```blocks\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\nBME280.PowerOn()\nBME280.Address(BME280_I2C_ADDRESS.ADDR_0x76)\nfunction BME280_sensor () {\n    trykk = BME280.pressure(BME280_P.Pa)\n}\n```\n\n<!-- Del 6.2: -->\n\n## Oppgave 6: Skrive lufttrykk på OLED-skjerm\n\nKopier koden vi har brukt før for å skrive til OLED-skjerm.\n\nI den første ruta, skriv \"Trykk: \". I den andre ruta, sette inn ``||variables: trykk||``. I den tredje, skriv \" Pa\". Skriv til linje 4.\n\n```blocks\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\nBME280.PowerOn()\nBME280.Address(BME280_I2C_ADDRESS.ADDR_0x76)\nfunction barometer () {\n    trykk = BME280.pressure(BME280_P.Pa)\n    kitronik_VIEW128x64.show(\"Trykk: \" + trykk + \" Pa\", 4)\n}\n```\n\n\n<!-- Del 7: -->\n\n## Ferdig! \n\nGratulerer! Du har nå løst alle oppgavene du trenger for å kunne programmere en fullstendig versjon av CanSat med bruk av micro:bit!\n\n```blocks\ninput.onPinPressed(TouchPin.P0, function () {\n\n})\nradio.onReceivedNumber(function (receivedNumber) {\n\n})\ninput.onPinReleased(TouchPin.P0, function () {\n\n})\ninput.onLogoEvent(TouchButtonEvent.Pressed, function () {\n\n})\ninput.onButtonPressed(Button.A, function () {\n    if (input.buttonIsPressed(Button.A)) {\n        input.setAccelerometerRange(AcceleratorRange.OneG)\n        input.setSoundThreshold(SoundThreshold.Loud, 128)\n    } else if (input.acceleration(Dimension.X) == 0) {\n        // skjerm blokker\n        led.plot(led.brightness(), 0)\n        led.toggle(led.pointBrightness(0, 0), 0)\n        led.unplot(0, 0)\n        led.plotBarGraph(\n            0,\n            0\n        )\n        led.plotBrightness(0, 0, 255)\n        led.setBrightness(255)\n        led.enable(false)\n        led.stopAnimation()\n        led.setDisplayMode(DisplayMode.BlackAndWhite)\n    } else if (input.lightLevel() < 0) {\n        // radio blokker\n        radio.setGroup(1)\n        radio.sendNumber(0)\n        radio.sendValue(\"name\", 0)\n        radio.sendString(\"\")\n        radio.setTransmitPower(7)\n        radio.setTransmitSerialNumber(true)\n        radio.setFrequencyBand(0)\n        radio.raiseEvent(\n            EventBusSource.MICROBIT_ID_BUTTON_A,\n            EventBusValue.MICROBIT_EVT_ANY\n        )\n    } else if (input.pinIsPressed(TouchPin.P0)) {\n\n    } else if (input.isGesture(Gesture.Shake)) {\n\n    } else if (input.compassHeading() == 0) {\n\n    } else if (input.temperature() == 0) {\n\n    } else if (input.logoIsPressed()) {\n\n    } else if (\"\" == \"\") {\n\n    } else if (input.soundLevel() < input.magneticForce(Dimension.X) && input.rotation(Rotation.Pitch) == input.runningTime()) {\n\n    } else if (!(true) || false) {\n\n    } else if (input.runningTimeMicros() == 0 || 0 == 0) {\n        music.play(music.stringPlayable(\"- - - - - - - - \", 120), music.PlaybackMode.UntilDone)\n        music.play(music.tonePlayable(262, music.beat(BeatFraction.Whole)), music.PlaybackMode.UntilDone)\n        music.ringTone(262)\n        music.rest(music.beat(BeatFraction.Whole))\n        music.setVolume(music.volume())\n        music.stopAllSounds()\n        music.changeTempoBy(music.beat(BeatFraction.Whole))\n        music.setTempo(music.tempo())\n        music._playDefaultBackground(music.builtInPlayableMelody(Melodies.Dadadadum), music.PlaybackMode.InBackground)\n        music.stopMelody(MelodyStopOptions.All)\n        music.play(music.builtinPlayableSoundEffect(soundExpression.giggle), music.PlaybackMode.UntilDone)\n        music.play(music.createSoundExpression(WaveShape.Sine, 5000, 0, 255, 0, 500, SoundExpressionEffect.None, InterpolationCurve.Linear), music.PlaybackMode.UntilDone)\n        music.setBuiltInSpeakerEnabled(false)\n    } else if (music.isSoundPlaying()) {\n        tekst = (\"\" + \"this\".split(\"\") + String.fromCharCode(0).charCodeAt(0)).length\n        tekst = parseFloat(\"123\")\n        tekst = convertToText(0).charAt(0).substr(0, \"this\".compare(\"\")).indexOf(\"\")\n    } else if (led.point(0, 0)) {\n\n    } else if (BMP280.temperature() == BMP280.pressure()) {\n        BMP280.PowerOn()\n        BMP280.PowerOff()\n        BMP280.Address(BMP280_I2C_ADDRESS.ADDR_0x76)\n    } else if (Math.randomBoolean()) {\n        basic.showNumber(0 * 0 - Math.PI + 0 / (Math.min(Math.max(Math.sqrt(Math.round(randint(0, 10))), Math.abs(Math.constrain(0, 0, 0))), Math.map(0, 0, 1023, 0, 4)) % 1))\n    } else if (\"this\".includes(\"\")) {\n\n    } else if (\"this\".isEmpty()) {\n\n    } else if (pins.digitalReadPin(pins.map(\n        0,\n        0,\n        1023,\n        0,\n        4\n    )) == pins.analogReadPin(AnalogPin.P0)) {\n        pins.digitalWritePin(DigitalPin.P0, 0)\n        pins.analogWritePin(AnalogPin.P0, 1023)\n        pins.analogSetPeriod(AnalogPin.P0, 20000)\n        pins.setAudioPin(DigitalPin.P0)\n        pins.setAudioPinEnabled(false)\n        pins.servoWritePin(AnalogPin.P0, 180)\n        pins.servoSetPulse(AnalogPin.P0, 1500)\n    } else if (control.millis() == 0) {\n        control.waitForEvent(control.eventValue(), 0)\n        control.reset()\n        control.waitMicros(control.eventTimestamp())\n        control.raiseEvent(\n            EventBusSource.MICROBIT_ID_BUTTON_A,\n            EventBusValue.MICROBIT_EVT_ANY\n        )\n    } else {\n        serial.writeLine(serial.readLine())\n        serial.writeNumber(0)\n        serial.writeValue(\"\" + serial.readUntil(serial.delimiters(Delimiters.NewLine)) + serial.readString(), 0)\n        serial.writeString(\"\" + (serial.readBuffer(0)))\n        serial.writeNumbers([0, 1])\n        serial.redirect(\n            SerialPin.P0,\n            SerialPin.P1,\n            BaudRate.BaudRate115200\n        )\n        serial.redirectToUSB()\n        serial.setTxBufferSize(32)\n        serial.setRxBufferSize(32)\n        serial.setWriteLinePadding(0)\n        serial.setBaudRate(BaudRate.BaudRate115200)\n    }\n})\ninput.onGesture(Gesture.Shake, function () {\n    BMP280.temperature()\n    BMP280.pressure()\n    BMP280.PowerOn()\n    BMP280.PowerOff()\n    BMP280.Address(BMP280_I2C_ADDRESS.ADDR_0x76)\n})\nfunction doSomething() {\n\n}\nradio.onReceivedString(function (receivedString) {\n\n})\ninput.onSound(DetectedSound.Loud, function () {\n\n})\nradio.onReceivedValue(function (name, value) {\n\n})\ncontrol.onEvent(EventBusSource.MICROBIT_ID_BUTTON_A, EventBusValue.MICROBIT_EVT_ANY, function () {\n\n})\nserial.onDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n\n})\npins.onPulsed(DigitalPin.P0, PulseValue.High, function () {\n\n})\nmusic.onEvent(MusicEvent.MelodyNotePlayed, function () {\n\n})\nlet teksttabell: string[] = []\nlet tabell: number[] = []\nlet tekst = 0\n// basis blokker\nbasic.showNumber(0)\nbasic.showLeds(`\n    . . . . .\n    . . . . .\n    . . # . .\n    . . . . .\n    . . . . .\n    `)\nbasic.showIcon(IconNames.Heart)\nbasic.showString(\"Hello!\")\nbasic.clearScreen()\nbasic.pause(100)\nbasic.showArrow(ArrowNames.North)\nradio.setGroup(1)\nradio.sendNumber(0)\nradio.sendValue(\"name\", 0)\nradio.sendString(\"\")\nradio.setTransmitPower(7)\nradio.setTransmitSerialNumber(true)\nradio.setFrequencyBand(0)\nradio.raiseEvent(\n    EventBusSource.MICROBIT_ID_BUTTON_A,\n    EventBusValue.MICROBIT_EVT_ANY\n)\nloops.everyInterval(500, function () {\n\n})\nbasic.forever(function () {\n    let list: number[] = []\n    for (let index = 0; index < 4; index++) {\n\n    }\n    // løkker blokker\n    while (false) {\n\n    }\n    for (let verdi of tabell) {\n\n    }\n    for (let indeks = 0; indeks <= 4; indeks++) {\n\n    }\n    for (let index = 0; index < 5; index++) {\n\n    }\n    for (let index = 0; index < radio.receivedPacket(RadioPacketProperty.SignalStrength); index++) {\n        continue;\n        break;\n    }\n    // Logikk blokker\n    if (true) {\n\n    }\n    if (true) {\n\n    } else {\n\n    }\n    kitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(false))\n    kitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\n    kitronik_VIEW128x64.refresh()\n    kitronik_VIEW128x64.invert(kitronik_VIEW128x64.onOff(false))\n    kitronik_VIEW128x64.show(0)\n    kitronik_VIEW128x64.setPixel(0, 0)\n    kitronik_VIEW128x64.plot(0)\n    kitronik_VIEW128x64.drawLine(kitronik_VIEW128x64.LineDirectionSelection.horizontal, 10, 0, 0)\n    kitronik_VIEW128x64.drawRect(60, 30, 0, 0)\n    kitronik_VIEW128x64.clearLine(1)\n    kitronik_VIEW128x64.clearPixel(0, 0)\n    kitronik_VIEW128x64.clear()\n    // funksjoner blokker\n    doSomething()\n    // tabeller blokker\n    tabell = [tabell.length, 2, 3]\n    teksttabell = [\"ei / en / ett\", \"b\", \"c\"]\n    tabell[list.removeAt(list._pickRandom())] = list.shift()\n    tabell.push(tabell[list.pop()])\n    tabell.pop()\n    tabell = []\n    tabell[0] = 0\n    list.push(list.unshift(0))\n    list.pop()\n    tabell.shift()\n    list.unshift(0)\n    list.insertAt(0, list.indexOf(0))\n    list.removeAt(0)\n    list.reverse()\n})\nbasic.forever(function () {\n\n})\ncontrol.inBackground(function () {\n\n})\n```\n\n```package\noled-skjerm=github:oysa88/oled-skjerm\nBME280=github:oysa88/BME280\n```","pxt.json":"{\n    \"name\": \"CanSat Øving Tutorial NY\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"cansat-tutorial.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1770106330894,"editorVersion":"8.0.18","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\"></block></xml>","main.ts":"basic.forever(function () {\n\t\n})\n","README.md":"","cansat-tutorial.md":"# CanSat Øvinger Tutorial\n\n### @diffs true\n### @unifiedToolbox true\n\n<!-- Del 1: -->\n\n## CanSat Øvingsoppgaver @unplugged\n\nI denne veiledningen skal vi gå gjennom grunnleggende funksjoner som dere får bruk for når dere skal programmere en CanSat. \n\n**Oppgaver dere skal løse er: **\n\n**1)** Få et LED-lys til å blinke ved koble det til pins på micro:bit\n\n**2)** Lage en teller som teller fra 10 til 0, og så skrur på LED-lyset i 5 sekunder.\n\n**3)** Bruke en OLED-skjerm, og vise nedtellingen på skjermen.\n\n**4)** Lage et voltmeter som skriver spenningen til OLED-skjermen.\n\n**5)** Lese analogverdi fra en TMP36 (Temperatursensor) og konvertere disse til temperatur vi viser på OLED-skjermen.\n\n**6)** Koble til en BMP280 sensor, les av lufttrykk og skriv det på OLED-skjerm.\n\n**7)** Regne om barometrisk lufttrykk til relativ høyde på CanSat.\n\n**8)** Sende data mellom 2 micro:bit og lagre de i en datalogger\n\n#### **Lykke til!**\n\n\n<!-- Del 1.1: -->\n\n## Oppgave 1 - Koble LED-lys til CanSat @unplugged\n\nKoble opp kretsen som vist på bildet under.\n\nNB: Koble pluss på LED til inngangen P0 og minus til jord (GND).\n\n![microbit_øvelse_1_LED_liten.jpg](https://i.postimg.cc/KYqc9mtM/microbit_øvelse_1_LED_liten.jpg)\n\n\n<!-- Del 1.2: -->\n\n## Oppgave 1: Få LED-lyset til å skru seg AV og PÅ én gang hvert sekund.\n\nInni ``||basic: gjenta for alltid||``:\n\nFinn blokken ``||pins: skriv digital til||`` som vi skal bruke for å skru AV og PÅ LED-lyset vi har koblet til CanSat. Sett verdien til 1 for å skru lyset PÅ og 0 for å skru det AV.\n\nBruk en ``||basic: pause||`` for å si hvor lenge lyset skal være PÅ og AV.\n\n**Ekstra**: Endre hvor fort LED-lyset blinker ved å justere på tiden i ``||basic: pause||``-blokken.\n\n**HINT**: 1000 ms i ett sekund\n\n\n```blocks\nbasic.forever(function () {\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(500)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n    basic.pause(500)\n}\n```\n\n<!-- Del 2.1: -->\n\n## Oppgave 2: Telle fra 10 til 0\n\n**Når man skal lage store koder, er det vanlig å bruke ``||functions: funksjoner||``. Inni funksjonen bygger vi koden for det vi vil den skal utføre, og så kaller vi den opp når vi trenger den.**\n\nStart med å lage funksjonen ``||functions: nedtelling||``:\n\nFor å kunne telle nedover, trenger vi en variabel som kan huske tallet vår. Variabler er noe vi bruker for å at koden vår skal kunne *huske* verdiene vi jobber med. Lag en ny variabel: ``||variables: teller ||``. Plasser blokken ``||variables: sett teller til 10 ||`` inni ``||functions: nedtelling||``.\n\nSiden vi skal telle ned fra 10 til 0, bruker vi en ``||loops: FOR-løkke ||`` som lar oss gjenta løkken akkurat så mange ganger vi ønsker. \n\nSett ``||loops: gjenta for indeks ||`` til å kjøres **fra 0 til 10**.\n\nInni ``||loops: gjenta for indeks ||`` skal vi bruke en ``||basic: vis tall ||`` til å vise ``||variables: teller ||``. Og for hver gang den har vist tallet, ``||variables: endre teller med -1 ||``.\n\nHusk å kjøre ``||functions: nedtelling||`` fra ``||basic: ved start||``. Denne blokken brukes for å si når funksjonen skal kjøres.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n}\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 2.2: -->\n\n## Oppgave 2: Få LED-lys til å lyse i 5 sek. etter nedtellingen\n\nFor å få LED til å lyse i 5 sek, kan vi flytte blokkene vi har i ``||basic: gjenta for alltid ||``, over til ``||functions: nedtelling ||``. \n\nEndre ``||basic: pause ||``  mellom LED PÅ og AV til 5000 ms. *(Fjern ``||basic: pause ||`` etter ``||pins: skriv digital P0 til 0||``.)*\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 2.3: -->\n\n## Oppgave 2: Bestemme når nedtelling skal starte\n\n``||functions: Funksjonen nedtelling||`` kjører når vi starter micro:biten. Hvis vi vil at den skal kjøres på nytt, kan vi f.eks. kalle den opp når vi ``||input: trykker på knapp A||``.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\ninput.onButtonPressed(Button.A, function () {\n    nedtelling()\n})\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 3: -->\n\n## Oppgave 3: Skriv til OLED-skjerm @unplugged\n\nNå skal vi se på hvordan vi kan bruke en Kitronik OLED-skjerm for å bedre vise dataene våre. \n\nSkjermen skal kobles til mellom CanSat og micro:bit.\n\n![OLED_Kitronik_liten.jpg](https://i.postimg.cc/mD2ry8kJ/OLED_Kitronik_liten.jpg)\n\n\n<!-- Del 3.1: -->\n\n## Oppgave 3: Sette opp OLED-skjerm\n\nFra biblioteket ``||kitronik_VIEW128x64: OLED-skjerm||``, hent blokkene ``||kitronik_VIEW128x64: skru AV OLED-skjerm||`` og ``||kitronik_VIEW128x64: Sett font størrelse til Normal||``. \n\nPlasser begge blokkene inn i ``||basic: ved start||``, og sett OLED-skjerm til ``||kitronik_VIEW128x64: PÅ||`` og sett font til ``||kitronik_VIEW128x64: Stor||``.\n\n```blocks\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Big)\n```\n\n\n<!-- Del 3.2: -->\n\n## Oppgave 3: Vise nedtelling på OLED-skjermen\n\nVi skal vise nedtellingen vi lagde i forrige oppgave på OLED-skjermen vi nå har satt opp.\n\nFjern blokken ``||basic: vis tall||`` ``||variables: teller||`` fra  funksjonen ``||functions: nedtelling||``. \n\nFor å vise noe på skjermen, bruk blokken ``||kitronik_VIEW128x64: vis ||``. Trykk på pluss(+) for å utvide blokken, og bestemme hvilken linje teksten skal skrives på:\n\n- ``||kitronik_VIEW128x64: vis||``, vis ``||variables: teller||`` ``||kitronik_VIEW128x64: på linje 1||``.\n\nFor å sørge for at skjermen alltid viser riktig verdi, må vi hele tiden oppdatere OLED-skjermen. Vi må derfor plassere``||kitronik_VIEW128x64: fjerne alt på skjermen||`` inni ``||basic: gjenta for alltid||``.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        kitronik_VIEW128x64.show(teller, 1)\n        teller += -1\n        basic.pause(1000)\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\ninput.onButtonPressed(Button.A, function () {\n    nedtelling()\n})\nlet teller = 0\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Big)\nnedtelling()\nbasic.forever(function () {\n\tkitronik_VIEW128x64.clear()\n})\n\n\n```\n\n\n<!-- Del 4: -->\n\n## Oppgave 4: Lage et voltmeter @unplugged\n\nAlle sensorene vi skal koble til CanSat'en, gir oss en analog verdi. Noen av disse verdien må vi først regne om til en spenningsverdi, og så videre til den faktiske verdien vi kan bruke. \n\nVi må derfor lære hvordan man konverterer den analoge verdien vi får inn på micro:biten til en spenningsverdi.\n\n\n<!-- Del 4.1: -->\n\n## Oppgave 4: Lagre analog verdi fra sensor som variabel\n\nStart med å lage en ny funksjon: ``||functions: voltmeter||``.\n\nInni ``||functions: voltmeter||`` skal vi lage en ny variabel: ``||variables: analogVerdi||``. Sett ``||variables: analogVerdi||`` til å ``||pins: lese analog verdi fra P0||``.\n\n```blocks\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n```\n\n<!-- Del 4.2: -->\n\n## Oppgave 4: Vise analog verdi på OLED-skjermen\n\nInni funksjonen ``||functions: voltmeter||`` skal vi vise den analoge verdien vi får fra P0. \n\nFor å vise noe på skjermen, bruk blokken ``||kitronik_VIEW128x64: vis ||``. Trykk på pluss(+) for å utvide blokken. Sett linjevalg til 1\n\nFor å kunne vise både tekst og en variabel på samme linje, må vi hente ``||text: sett sammen ||`` fra biblioteket ``||text: Tekst ||``. Sett blokken inni ``||kitronik_VIEW128x64: show ||``.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Analog: \". I den andre ruta, sette inn variabelen ``||variables: analogVerdi||``.\n\nFor å få programmet vårt til å kjøre funksjonen vi har laget, må vi legge inn blokken ``||functions: kjør voltmeter||`` inne fra ``||basic: gjenta for alltid||``. Gjør det samme for alle funksjonene du skal lage, hvis ikke annet er oppgitt. \n\n\n```blocks\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n```\n\n\n<!-- Del 4.3: -->\n\n## Oppgave 4: Bestemme verdi på Uref\n\nLage en ny variabel: ``||variables: Uref||``.\n\n``||variables: Uref||`` skal settes inn i ``||basic: ved start||`` . Verdien vi skriver inn her er avhengig av om CanSat får strøm fra USB eller batteri.\n\nSe tabell under for hva ``||variables: Uref||`` skal være :\n\n|   **  Spenning fra USB  **   | |   **  Spenning fra batteri  **   |\n| :------------: | | :------------: |\n| 3.2 | | 3.0 |\n\n```blocks\nlet Uref = 0\nUref = 3.2\n```\n\n\n<!-- Del 4.4: -->\n\n## Oppgave 4: Beregne spenning fra analog verdi\n\nVi har nå fått en analog verdi vi kan bruke for å regne ut spenningen over sensoren. For å gjøre dette, lage en ny variabel: ``||variables: spenning||``.\n\nBruk denne formelen for å sette ``||variables: spenning||`` til ( ``||variables: analogverdi||`` / 1024 ) * ``||variables: Uref||``.\n\n\n![Formel_spenning_fra_analogverdi_liten.png](https://i.postimg.cc/YSn2XtQv/Formel_spenning_fra_analogverdi_liten.png)\n\n```blocks\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = analogVerdi / 1024 * Uref\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    basic.pause(500)\n}\n```\n\n\n<!-- Del 4.5: -->\n\n## Oppgave 4: Vis spenningsverdi på OLED-skjerm\n\nVi skal gjøre det samme som vi gjorde for å vise den analoge verdien på OLED-skjermen:\n\nHente ``||text: sett sammen ||`` fra biblioteket ``||text: Tekst ||``. Sett blokken inni en ny ``||kitronik_VIEW128x64: show ||``. Utvid blokken og endre til å skrive på linje 2.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Spenning: \". I den andre ruta, sette inn variabelen ``||variables: spenning||``. Utvid til en tredje rute hvor du skriver \" V\".\n\n**Bonus:** Endre skriftstørrelse på OLED-skjerm til ``||kitronik_VIEW128x64: Normal ||``.\n\n```blocks\nlet spenning = 0\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = analogVerdi / 1024 * Uref\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n    basic.pause(500)\n}\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\n```\n\n\n<!-- Del 4.6: -->\n\n## Oppgave 4: Runde av spenningsverdi\n\nNår du testet koden din, så du kanskje at det ble mange desimaler. Vi har ingen blokk som lar oss direkte avrunde til 2 desimaler. Derfor må vi multiplisere verdien vi har fått med 100, og deretter ``||math: avrund ||`` ``||variables: spenning||``. Det gir oss et heltall som er 100 ganger for stort. Hvis vi nå deler det nye tallet vårt på 100, vil vi få riktig tall, og ha flyttet kommategnet 2 plasser oppover slik at vi får en verdi med 2 desimaler.\n\nVi skal endre utregningen for variabelen ``||variables: spenning ||``. Formelen blir seende slik ut vi setter ``||variables: spenning ||`` til ``||math: avrund||`` ( ``||variables: analogVerdi||`` ``||math: / ||`` 1024 ``||math: *||`` ``||variables: Uref ||`` ``||math: *||`` 100 ) ``||math: / ||`` 100\n\n```blocks\nlet spenning = 0\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = Math.round(analogVerdi / 1024 * Uref * 100) / 100\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n    basic.pause(500)\n}\n```\n\n\n<!-- Del 5: -->\n\n## Oppgave 5: Lage et termometer med TMP36 @unplugged\n\nI denne oppgaven skal vi finne temperaturen fra en TMP36 temperatursensor. \n\nKoble opp kretsen på bildet under:\n\n![Oppgave_5_TMP36_Oppkobling_liten.png](https://i.postimg.cc/Jh67TRjX/Oppgave_5_TMP36_Oppkobling_liten.png)\n\n\n<!-- Del 5.1: -->\n\n## Oppgave 5: Regne om spenningsverdi til temperatur\n\nVi skal lage en ny funksjon: ``||functions: termometer||``.\n\nInne ``||functions: termometer||``, lage en ny variabel: ``||variables: temperatur||``.\n\nBruk denne formelen for å sette ``||variables: temperatur||`` til ( ``||variables: spenning||`` - 0.5 ) / 0.01\n\n```blocks\nfunction termometer () {\n    temperatur = (spenning - 0.5) / 0.01\n}\n```\n\n<!-- Del 5.2: -->\n\n## Oppgave 5: Vise termometer på OLED-skjerm\n\n Plasser en ``||text: sett sammen ||`` inni en ny ``||kitronik_VIEW128x64: show ||``. Utvid blokken og endre til å skrive på linje 3.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Temperatur: \". I den andre ruta, sette inn variabelen ``||variables: temperatur||``. Utvid til en tredje rute hvor du skriver \" C\".\n\nKall opp funksjonen ``||functions: termometer||`` fra ``||basic: gjenta for alltid||``, og flytt ``||basic: pause 500 ms||`` fra ``||functions: voltmeter||`` til ``||basic: gjenta for alltid||``.\n\n```blocks\nfunction termometer () {\n    temperatur = (spenning - 0.5) / 0.01\n    kitronik_VIEW128x64.show(\"Temperatur: \" + temperatur + \" C\", 3)\n}\nbasic.forever(function () {\n    voltmeter()\n    termometer()\n    basic.pause(500)\n})\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = Math.trunc(analogVerdi / 1024 * Uref * 100) / 100\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n}\n```\n\n<!-- Del 6: -->\n\n## Oppgave 6: Lag et barometer @unplugged\n\n#### Vi skal bruke en ``||BMP280: BMP280||`` sensor. \n\n![BME280.png](https://i.postimg.cc/ZYjVtVRH/BME280.png)\n\nDenne sensoren kan måle:\n\n- Temperatur\n- Trykk\n- Luftfuktighet\n- Duggpunkt\n\nFor å lage et barometer skal vi bruke ``||BMP280: trykk||``.\n\n\n<!-- Del 6.1: -->\n\n## Oppgave 6: Koble opp og lese av fra BME280\n\nFor å få BME280 til å snakke med CanSat, skal vi sette opp to blokken inn i ``||basic: ved start||`` fra biblioteket ``||BMP280: BMP280||``:\n\n- ``||BME280: Power On||``\n- ``||BME280: set address 0x76||``\n\nVidere, lage en ny funksjon: ``||functions: BMP280_sensor||``.\n\nInne ``||functions: BME280_sensor||``, sett opp en ny variabel: ``||variables: trykk||``. Sett ``||variables: trykk||`` til ``||BME280: pressure||`` (fra biblioteket BME280).\n\n```blocks\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\nBME280.PowerOn()\nBME280.Address(BME280_I2C_ADDRESS.ADDR_0x76)\nfunction BME280_sensor () {\n    trykk = BME280.pressure(BME280_P.Pa)\n}\n```\n\n<!-- Del 6.2: -->\n\n## Oppgave 6: Skrive lufttrykk på OLED-skjerm\n\nKopier koden vi har brukt før for å skrive til OLED-skjerm.\n\nI den første ruta, skriv \"Trykk: \". I den andre ruta, sette inn ``||variables: trykk||``. I den tredje, skriv \" Pa\". Skriv til linje 4.\n\n```blocks\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\nBME280.PowerOn()\nBME280.Address(BME280_I2C_ADDRESS.ADDR_0x76)\nfunction barometer () {\n    trykk = BME280.pressure(BME280_P.Pa)\n    kitronik_VIEW128x64.show(\"Trykk: \" + trykk + \" Pa\", 4)\n}\n```\n\n\n<!-- Del 7: -->\n\n## Ferdig! \n\nGratulerer! Du har nå løst alle oppgavene du trenger for å kunne programmere en fullstendig versjon av CanSat med bruk av micro:bit!\n\n```blocks\ninput.onPinPressed(TouchPin.P0, function () {\n\n})\nradio.onReceivedNumber(function (receivedNumber) {\n\n})\ninput.onPinReleased(TouchPin.P0, function () {\n\n})\ninput.onLogoEvent(TouchButtonEvent.Pressed, function () {\n\n})\ninput.onButtonPressed(Button.A, function () {\n    if (input.buttonIsPressed(Button.A)) {\n        input.setAccelerometerRange(AcceleratorRange.OneG)\n        input.setSoundThreshold(SoundThreshold.Loud, 128)\n    } else if (input.acceleration(Dimension.X) == 0) {\n        // skjerm blokker\n        led.plot(led.brightness(), 0)\n        led.toggle(led.pointBrightness(0, 0), 0)\n        led.unplot(0, 0)\n        led.plotBarGraph(\n            0,\n            0\n        )\n        led.plotBrightness(0, 0, 255)\n        led.setBrightness(255)\n        led.enable(false)\n        led.stopAnimation()\n        led.setDisplayMode(DisplayMode.BlackAndWhite)\n    } else if (input.lightLevel() < 0) {\n        // radio blokker\n        radio.setGroup(1)\n        radio.sendNumber(0)\n        radio.sendValue(\"name\", 0)\n        radio.sendString(\"\")\n        radio.setTransmitPower(7)\n        radio.setTransmitSerialNumber(true)\n        radio.setFrequencyBand(0)\n        radio.raiseEvent(\n            EventBusSource.MICROBIT_ID_BUTTON_A,\n            EventBusValue.MICROBIT_EVT_ANY\n        )\n    } else if (input.pinIsPressed(TouchPin.P0)) {\n\n    } else if (input.isGesture(Gesture.Shake)) {\n\n    } else if (input.compassHeading() == 0) {\n\n    } else if (input.temperature() == 0) {\n\n    } else if (input.logoIsPressed()) {\n\n    } else if (\"\" == \"\") {\n\n    } else if (input.soundLevel() < input.magneticForce(Dimension.X) && input.rotation(Rotation.Pitch) == input.runningTime()) {\n\n    } else if (!(true) || false) {\n\n    } else if (input.runningTimeMicros() == 0 || 0 == 0) {\n        music.play(music.stringPlayable(\"- - - - - - - - \", 120), music.PlaybackMode.UntilDone)\n        music.play(music.tonePlayable(262, music.beat(BeatFraction.Whole)), music.PlaybackMode.UntilDone)\n        music.ringTone(262)\n        music.rest(music.beat(BeatFraction.Whole))\n        music.setVolume(music.volume())\n        music.stopAllSounds()\n        music.changeTempoBy(music.beat(BeatFraction.Whole))\n        music.setTempo(music.tempo())\n        music._playDefaultBackground(music.builtInPlayableMelody(Melodies.Dadadadum), music.PlaybackMode.InBackground)\n        music.stopMelody(MelodyStopOptions.All)\n        music.play(music.builtinPlayableSoundEffect(soundExpression.giggle), music.PlaybackMode.UntilDone)\n        music.play(music.createSoundExpression(WaveShape.Sine, 5000, 0, 255, 0, 500, SoundExpressionEffect.None, InterpolationCurve.Linear), music.PlaybackMode.UntilDone)\n        music.setBuiltInSpeakerEnabled(false)\n    } else if (music.isSoundPlaying()) {\n        tekst = (\"\" + \"this\".split(\"\") + String.fromCharCode(0).charCodeAt(0)).length\n        tekst = parseFloat(\"123\")\n        tekst = convertToText(0).charAt(0).substr(0, \"this\".compare(\"\")).indexOf(\"\")\n    } else if (led.point(0, 0)) {\n\n    } else if (BMP280.temperature() == BMP280.pressure()) {\n        BMP280.PowerOn()\n        BMP280.PowerOff()\n        BMP280.Address(BMP280_I2C_ADDRESS.ADDR_0x76)\n    } else if (Math.randomBoolean()) {\n        basic.showNumber(0 * 0 - Math.PI + 0 / (Math.min(Math.max(Math.sqrt(Math.round(randint(0, 10))), Math.abs(Math.constrain(0, 0, 0))), Math.map(0, 0, 1023, 0, 4)) % 1))\n    } else if (\"this\".includes(\"\")) {\n\n    } else if (\"this\".isEmpty()) {\n\n    } else if (pins.digitalReadPin(pins.map(\n        0,\n        0,\n        1023,\n        0,\n        4\n    )) == pins.analogReadPin(AnalogPin.P0)) {\n        pins.digitalWritePin(DigitalPin.P0, 0)\n        pins.analogWritePin(AnalogPin.P0, 1023)\n        pins.analogSetPeriod(AnalogPin.P0, 20000)\n        pins.setAudioPin(DigitalPin.P0)\n        pins.setAudioPinEnabled(false)\n        pins.servoWritePin(AnalogPin.P0, 180)\n        pins.servoSetPulse(AnalogPin.P0, 1500)\n    } else if (control.millis() == 0) {\n        control.waitForEvent(control.eventValue(), 0)\n        control.reset()\n        control.waitMicros(control.eventTimestamp())\n        control.raiseEvent(\n            EventBusSource.MICROBIT_ID_BUTTON_A,\n            EventBusValue.MICROBIT_EVT_ANY\n        )\n    } else {\n        serial.writeLine(serial.readLine())\n        serial.writeNumber(0)\n        serial.writeValue(\"\" + serial.readUntil(serial.delimiters(Delimiters.NewLine)) + serial.readString(), 0)\n        serial.writeString(\"\" + (serial.readBuffer(0)))\n        serial.writeNumbers([0, 1])\n        serial.redirect(\n            SerialPin.P0,\n            SerialPin.P1,\n            BaudRate.BaudRate115200\n        )\n        serial.redirectToUSB()\n        serial.setTxBufferSize(32)\n        serial.setRxBufferSize(32)\n        serial.setWriteLinePadding(0)\n        serial.setBaudRate(BaudRate.BaudRate115200)\n    }\n})\ninput.onGesture(Gesture.Shake, function () {\n    BMP280.temperature()\n    BMP280.pressure()\n    BMP280.PowerOn()\n    BMP280.PowerOff()\n    BMP280.Address(BMP280_I2C_ADDRESS.ADDR_0x76)\n})\nfunction doSomething() {\n\n}\nradio.onReceivedString(function (receivedString) {\n\n})\ninput.onSound(DetectedSound.Loud, function () {\n\n})\nradio.onReceivedValue(function (name, value) {\n\n})\ncontrol.onEvent(EventBusSource.MICROBIT_ID_BUTTON_A, EventBusValue.MICROBIT_EVT_ANY, function () {\n\n})\nserial.onDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n\n})\npins.onPulsed(DigitalPin.P0, PulseValue.High, function () {\n\n})\nmusic.onEvent(MusicEvent.MelodyNotePlayed, function () {\n\n})\nlet teksttabell: string[] = []\nlet tabell: number[] = []\nlet tekst = 0\n// basis blokker\nbasic.showNumber(0)\nbasic.showLeds(`\n    . . . . .\n    . . . . .\n    . . # . .\n    . . . . .\n    . . . . .\n    `)\nbasic.showIcon(IconNames.Heart)\nbasic.showString(\"Hello!\")\nbasic.clearScreen()\nbasic.pause(100)\nbasic.showArrow(ArrowNames.North)\nradio.setGroup(1)\nradio.sendNumber(0)\nradio.sendValue(\"name\", 0)\nradio.sendString(\"\")\nradio.setTransmitPower(7)\nradio.setTransmitSerialNumber(true)\nradio.setFrequencyBand(0)\nradio.raiseEvent(\n    EventBusSource.MICROBIT_ID_BUTTON_A,\n    EventBusValue.MICROBIT_EVT_ANY\n)\nloops.everyInterval(500, function () {\n\n})\nbasic.forever(function () {\n    let list: number[] = []\n    for (let index = 0; index < 4; index++) {\n\n    }\n    // løkker blokker\n    while (false) {\n\n    }\n    for (let verdi of tabell) {\n\n    }\n    for (let indeks = 0; indeks <= 4; indeks++) {\n\n    }\n    for (let index = 0; index < 5; index++) {\n\n    }\n    for (let index = 0; index < radio.receivedPacket(RadioPacketProperty.SignalStrength); index++) {\n        continue;\n        break;\n    }\n    // Logikk blokker\n    if (true) {\n\n    }\n    if (true) {\n\n    } else {\n\n    }\n    kitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(false))\n    kitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\n    kitronik_VIEW128x64.refresh()\n    kitronik_VIEW128x64.invert(kitronik_VIEW128x64.onOff(false))\n    kitronik_VIEW128x64.show(0)\n    kitronik_VIEW128x64.setPixel(0, 0)\n    kitronik_VIEW128x64.plot(0)\n    kitronik_VIEW128x64.drawLine(kitronik_VIEW128x64.LineDirectionSelection.horizontal, 10, 0, 0)\n    kitronik_VIEW128x64.drawRect(60, 30, 0, 0)\n    kitronik_VIEW128x64.clearLine(1)\n    kitronik_VIEW128x64.clearPixel(0, 0)\n    kitronik_VIEW128x64.clear()\n    // funksjoner blokker\n    doSomething()\n    // tabeller blokker\n    tabell = [tabell.length, 2, 3]\n    teksttabell = [\"ei / en / ett\", \"b\", \"c\"]\n    tabell[list.removeAt(list._pickRandom())] = list.shift()\n    tabell.push(tabell[list.pop()])\n    tabell.pop()\n    tabell = []\n    tabell[0] = 0\n    list.push(list.unshift(0))\n    list.pop()\n    tabell.shift()\n    list.unshift(0)\n    list.insertAt(0, list.indexOf(0))\n    list.removeAt(0)\n    list.reverse()\n})\nbasic.forever(function () {\n\n})\ncontrol.inBackground(function () {\n\n})\n```\n\n```package\noled-skjerm=github:oysa88/oled-skjerm\nBME280=github:oysa88/BME280\n```","pxt.json":"{\n    \"name\": \"CanSat Øving Tutorial NY\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"cansat-tutorial.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1770121251904,"editorVersion":"8.0.18","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\"></block></xml>","main.ts":"basic.forever(function () {\n\t\n})\n","README.md":"","cansat-tutorial.md":"# CanSat Øvinger Tutorial\n\n### @diffs true\n### @unifiedToolbox true\n\n<!-- Del 1: -->\n\n## CanSat Øvingsoppgaver @unplugged\n\nI denne veiledningen skal vi gå gjennom grunnleggende funksjoner som dere får bruk for når dere skal programmere en CanSat. \n\n**Oppgaver dere skal løse er: **\n\n**1)** Få et LED-lys til å blinke ved koble det til pins på micro:bit\n\n**2)** Lage en teller som teller fra 10 til 0, og så skrur på LED-lyset i 5 sekunder.\n\n**3)** Bruke en OLED-skjerm, og vise nedtellingen på skjermen.\n\n**4)** Lage et voltmeter som skriver spenningen til OLED-skjermen.\n\n**5)** Lese analogverdi fra en TMP36 (Temperatursensor) og konvertere disse til temperatur vi viser på OLED-skjermen.\n\n**6)** Koble til en BMP280 sensor, les av lufttrykk og skriv det på OLED-skjerm.\n\n**7)** Regne om barometrisk lufttrykk til relativ høyde på CanSat.\n\n**8)** Sende data mellom 2 micro:bit og lagre de i en datalogger\n\n#### **Lykke til!**\n\n\n<!-- Del 1.1: -->\n\n## Oppgave 1 - Koble LED-lys til CanSat @unplugged\n\nKoble opp kretsen som vist på bildet under.\n\nNB: Koble pluss på LED til inngangen P0 og minus til jord (GND).\n\n![microbit_øvelse_1_LED_liten.jpg](https://i.postimg.cc/KYqc9mtM/microbit_øvelse_1_LED_liten.jpg)\n\n\n<!-- Del 1.2: -->\n\n## Oppgave 1: Få LED-lyset til å skru seg AV og PÅ én gang hvert sekund.\n\nInni ``||basic: gjenta for alltid||``:\n\nFinn blokken ``||pins: skriv digital til||`` som vi skal bruke for å skru AV og PÅ LED-lyset vi har koblet til CanSat. Sett verdien til 1 for å skru lyset PÅ og 0 for å skru det AV.\n\nBruk en ``||basic: pause||`` for å si hvor lenge lyset skal være PÅ og AV.\n\n**Ekstra**: Endre hvor fort LED-lyset blinker ved å justere på tiden i ``||basic: pause||``-blokken.\n\n**HINT**: 1000 ms i ett sekund\n\n\n```blocks\nbasic.forever(function () {\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(500)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n    basic.pause(500)\n}\n```\n\n<!-- Del 2.1: -->\n\n## Oppgave 2: Telle fra 10 til 0\n\n**Når man skal lage store koder, er det vanlig å bruke ``||functions: funksjoner||``. Inni funksjonen bygger vi koden for det vi vil den skal utføre, og så kaller vi den opp når vi trenger den.**\n\nStart med å lage funksjonen ``||functions: nedtelling||``:\n\nFor å kunne telle nedover, trenger vi en variabel som kan huske tallet vår. Variabler er noe vi bruker for å at koden vår skal kunne *huske* verdiene vi jobber med. Lag en ny variabel: ``||variables: teller ||``. Plasser blokken ``||variables: sett teller til 10 ||`` inni ``||functions: nedtelling||``.\n\nSiden vi skal telle ned fra 10 til 0, bruker vi en ``||loops: FOR-løkke ||`` som lar oss gjenta løkken akkurat så mange ganger vi ønsker. \n\nSett ``||loops: gjenta for indeks ||`` til å kjøres **fra 0 til 10**.\n\nInni ``||loops: gjenta for indeks ||`` skal vi bruke en ``||basic: vis tall ||`` til å vise ``||variables: teller ||``. Og for hver gang den har vist tallet, ``||variables: endre teller med -1 ||``.\n\nHusk å kjøre ``||functions: nedtelling||`` fra ``||basic: ved start||``. Denne blokken brukes for å si når funksjonen skal kjøres.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n}\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 2.2: -->\n\n## Oppgave 2: Få LED-lys til å lyse i 5 sek. etter nedtellingen\n\nFor å få LED til å lyse i 5 sek, kan vi flytte blokkene vi har i ``||basic: gjenta for alltid ||``, over til ``||functions: nedtelling ||``. \n\nEndre ``||basic: pause ||``  mellom LED PÅ og AV til 5000 ms. *(Fjern ``||basic: pause ||`` etter ``||pins: skriv digital P0 til 0||``.)*\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 2.3: -->\n\n## Oppgave 2: Bestemme når nedtelling skal starte\n\n``||functions: Funksjonen nedtelling||`` kjører når vi starter micro:biten. Hvis vi vil at den skal kjøres på nytt, kan vi f.eks. kalle den opp når vi ``||input: trykker på knapp A||``.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\ninput.onButtonPressed(Button.A, function () {\n    nedtelling()\n})\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 3: -->\n\n## Oppgave 3: Skriv til OLED-skjerm @unplugged\n\nNå skal vi se på hvordan vi kan bruke en Kitronik OLED-skjerm for å bedre vise dataene våre. \n\nSkjermen skal kobles til mellom CanSat og micro:bit.\n\n![OLED_Kitronik_liten.jpg](https://i.postimg.cc/mD2ry8kJ/OLED_Kitronik_liten.jpg)\n\n\n<!-- Del 3.1: -->\n\n## Oppgave 3: Sette opp OLED-skjerm\n\nFra biblioteket ``||kitronik_VIEW128x64: OLED-skjerm||``, hent blokkene ``||kitronik_VIEW128x64: skru AV OLED-skjerm||`` og ``||kitronik_VIEW128x64: Sett font størrelse til Normal||``. \n\nPlasser begge blokkene inn i ``||basic: ved start||``, og sett OLED-skjerm til ``||kitronik_VIEW128x64: PÅ||`` og sett font til ``||kitronik_VIEW128x64: Stor||``.\n\n```blocks\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Big)\n```\n\n\n<!-- Del 3.2: -->\n\n## Oppgave 3: Vise nedtelling på OLED-skjermen\n\nVi skal vise nedtellingen vi lagde i forrige oppgave på OLED-skjermen vi nå har satt opp.\n\nFjern blokken ``||basic: vis tall||`` ``||variables: teller||`` fra  funksjonen ``||functions: nedtelling||``. \n\nFor å vise noe på skjermen, bruk blokken ``||kitronik_VIEW128x64: vis ||``. Trykk på pluss(+) for å utvide blokken, og bestemme hvilken linje teksten skal skrives på:\n\n- ``||kitronik_VIEW128x64: vis||``, vis ``||variables: teller||`` ``||kitronik_VIEW128x64: på linje 1||``.\n\nFor å sørge for at skjermen alltid viser riktig verdi, må vi hele tiden oppdatere OLED-skjermen. Vi må derfor plassere``||kitronik_VIEW128x64: fjerne alt på skjermen||`` inni ``||basic: gjenta for alltid||``.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        kitronik_VIEW128x64.show(teller, 1)\n        teller += -1\n        basic.pause(1000)\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\ninput.onButtonPressed(Button.A, function () {\n    nedtelling()\n})\nlet teller = 0\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Big)\nnedtelling()\nbasic.forever(function () {\n\tkitronik_VIEW128x64.clear()\n})\n\n```\n\n\n<!-- Del 4: -->\n\n## Oppgave 4: Lage et voltmeter @unplugged\n\nAlle sensorene vi skal koble til CanSat'en, gir oss en analog verdi. Noen av disse verdien må vi først regne om til en spenningsverdi, og så videre til den faktiske verdien vi kan bruke. \n\nVi må derfor lære hvordan man konverterer den analoge verdien vi får inn på micro:biten til en spenningsverdi.\n\n\n<!-- Del 4.1: -->\n\n## Oppgave 4: Lagre analog verdi fra sensor som variabel\n\nStart med å lage en ny funksjon: ``||functions: voltmeter||``.\n\nInni ``||functions: voltmeter||`` skal vi lage en ny variabel: ``||variables: analogVerdi||``. Sett ``||variables: analogVerdi||`` til å ``||pins: lese analog verdi fra P0||``.\n\n```blocks\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n```\n\n<!-- Del 4.2: -->\n\n## Oppgave 4: Vise analog verdi på OLED-skjermen\n\nInni funksjonen ``||functions: voltmeter||`` skal vi vise den analoge verdien vi får fra P0. \n\nFor å vise noe på skjermen, bruk blokken ``||kitronik_VIEW128x64: vis ||``. Trykk på pluss(+) for å utvide blokken, og bestemme hvilken linje teksten skal skrives på:\n\nFor å kunne vise både tekst og en variabel på samme linje, må vi hente ``||text: sett sammen ||`` fra biblioteket ``||text: Tekst ||``. Sett blokken inni ``||kitronik_VIEW128x64: vis ||``.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Analog: \". I den andre ruta, sette inn variabelen ``||variables: analogVerdi||``.\n\nFor å få programmet vårt til å kjøre funksjonen vi har laget, må vi legge inn blokken ``||functions: kjør voltmeter||`` inne fra ``||basic: gjenta for alltid||``. Gjør det samme for alle funksjonene du skal lage, hvis ikke annet er oppgitt. \n\n\n```blocks\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n```\n\n\n<!-- Del 4.3: -->\n\n## Oppgave 4: Bestemme verdi på Uref\n\nNår vi skal regne ut spenningen \n\nLage en ny variabel: ``||variables: Uref||``.\n\n``||variables: Uref||`` skal settes inn i ``||basic: ved start||`` . Verdien vi skriver inn her er avhengig av om CanSat får strøm fra USB eller batteri.\n\nSe tabell under for hva ``||variables: Uref||`` skal være :\n\n|   **  Spenning fra USB  **   | |   **  Spenning fra batteri  **   |\n| :------------: | | :------------: |\n| 3.2 | | 3.0 |\n\n```blocks\nlet Uref = 0\nUref = 3.2\n```\n\n\n<!-- Del 4.4: -->\n\n## Oppgave 4: Beregne spenning fra analog verdi\n\nVi har nå fått en analog verdi vi kan bruke for å regne ut spenningen over sensoren. For å gjøre dette, lage en ny variabel: ``||variables: spenning||``.\n\nBruk denne formelen for å sette ``||variables: spenning||`` til ( ``||variables: analogverdi||`` / 1024 ) * ``||variables: Uref||``.\n\n\n![Formel_spenning_fra_analogverdi_liten.png](https://i.postimg.cc/YSn2XtQv/Formel_spenning_fra_analogverdi_liten.png)\n\n```blocks\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = analogVerdi / 1024 * Uref\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    basic.pause(500)\n}\n```\n\n\n<!-- Del 4.5: -->\n\n## Oppgave 4: Vis spenningsverdi på OLED-skjerm\n\nVi skal gjøre det samme som vi gjorde for å vise den analoge verdien på OLED-skjermen:\n\nHente ``||text: sett sammen ||`` fra biblioteket ``||text: Tekst ||``. Sett blokken inni en ny ``||kitronik_VIEW128x64: show ||``. Utvid blokken og endre til å skrive på linje 2.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Spenning: \". I den andre ruta, sette inn variabelen ``||variables: spenning||``. Utvid til en tredje rute hvor du skriver \" V\".\n\n**Bonus:** Endre skriftstørrelse på OLED-skjerm til ``||kitronik_VIEW128x64: Normal ||``.\n\n```blocks\nlet spenning = 0\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = analogVerdi / 1024 * Uref\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n    basic.pause(500)\n}\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\n```\n\n\n<!-- Del 4.6: -->\n\n## Oppgave 4: Runde av spenningsverdi\n\nNår du testet koden din, så du kanskje at det ble mange desimaler. Vi har ingen blokk som lar oss direkte avrunde til 2 desimaler. Derfor må vi multiplisere verdien vi har fått med 100, og deretter ``||math: avrund ||`` ``||variables: spenning||``. Det gir oss et heltall som er 100 ganger for stort. Hvis vi nå deler det nye tallet vårt på 100, vil vi få riktig tall, og ha flyttet kommategnet 2 plasser oppover slik at vi får en verdi med 2 desimaler.\n\nVi skal endre utregningen for variabelen ``||variables: spenning ||``. Formelen blir seende slik ut vi setter ``||variables: spenning ||`` til ``||math: avrund||`` ( ``||variables: analogVerdi||`` ``||math: / ||`` 1024 ``||math: *||`` ``||variables: Uref ||`` ``||math: *||`` 100 ) ``||math: / ||`` 100\n\n```blocks\nlet spenning = 0\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = Math.round(analogVerdi / 1024 * Uref * 100) / 100\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n    basic.pause(500)\n}\n```\n\n\n<!-- Del 5: -->\n\n## Oppgave 5: Lage et termometer med TMP36 @unplugged\n\nI denne oppgaven skal vi finne temperaturen fra en TMP36 temperatursensor. \n\nKoble opp kretsen på bildet under:\n\n![Oppgave_5_TMP36_Oppkobling_liten.png](https://i.postimg.cc/Jh67TRjX/Oppgave_5_TMP36_Oppkobling_liten.png)\n\n\n<!-- Del 5.1: -->\n\n## Oppgave 5: Regne om spenningsverdi til temperatur\n\nVi skal lage en ny funksjon: ``||functions: termometer||``.\n\nInne ``||functions: termometer||``, lage en ny variabel: ``||variables: temperatur||``.\n\nBruk denne formelen for å sette ``||variables: temperatur||`` til ( ``||variables: spenning||`` - 0.5 ) / 0.01\n\n```blocks\nfunction termometer () {\n    temperatur = (spenning - 0.5) / 0.01\n}\n```\n\n<!-- Del 5.2: -->\n\n## Oppgave 5: Vise termometer på OLED-skjerm\n\n Plasser en ``||text: sett sammen ||`` inni en ny ``||kitronik_VIEW128x64: show ||``. Utvid blokken og endre til å skrive på linje 3.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Temperatur: \". I den andre ruta, sette inn variabelen ``||variables: temperatur||``. Utvid til en tredje rute hvor du skriver \" C\".\n\nKall opp funksjonen ``||functions: termometer||`` fra ``||basic: gjenta for alltid||``, og flytt ``||basic: pause 500 ms||`` fra ``||functions: voltmeter||`` til ``||basic: gjenta for alltid||``.\n\n```blocks\nfunction termometer () {\n    temperatur = (spenning - 0.5) / 0.01\n    kitronik_VIEW128x64.show(\"Temperatur: \" + temperatur + \" C\", 3)\n}\nbasic.forever(function () {\n    voltmeter()\n    termometer()\n    basic.pause(500)\n})\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = Math.trunc(analogVerdi / 1024 * Uref * 100) / 100\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n}\n```\n\n<!-- Del 6: -->\n\n## Oppgave 6: Lag et barometer @unplugged\n\n#### Vi skal bruke en ``||BMP280: BMP280||`` sensor. \n\n![BME280.png](https://i.postimg.cc/ZYjVtVRH/BME280.png)\n\nDenne sensoren kan måle:\n\n- Temperatur\n- Trykk\n- Luftfuktighet\n- Duggpunkt\n\nFor å lage et barometer skal vi bruke ``||BMP280: trykk||``.\n\n\n<!-- Del 6.1: -->\n\n## Oppgave 6: Koble opp og lese av fra BME280\n\nFor å få BME280 til å snakke med CanSat, skal vi sette opp to blokken inn i ``||basic: ved start||`` fra biblioteket ``||BMP280: BMP280||``:\n\n- ``||BME280: Power On||``\n- ``||BME280: set address 0x76||``\n\nVidere, lage en ny funksjon: ``||functions: BMP280_sensor||``.\n\nInne ``||functions: BME280_sensor||``, sett opp en ny variabel: ``||variables: trykk||``. Sett ``||variables: trykk||`` til ``||BME280: pressure||`` (fra biblioteket BME280).\n\n```blocks\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\nBME280.PowerOn()\nBME280.Address(BME280_I2C_ADDRESS.ADDR_0x76)\nfunction BME280_sensor () {\n    trykk = BME280.pressure(BME280_P.Pa)\n}\n```\n\n<!-- Del 6.2: -->\n\n## Oppgave 6: Skrive lufttrykk på OLED-skjerm\n\nKopier koden vi har brukt før for å skrive til OLED-skjerm.\n\nI den første ruta, skriv \"Trykk: \". I den andre ruta, sette inn ``||variables: trykk||``. I den tredje, skriv \" Pa\". Skriv til linje 4.\n\n```blocks\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\nBME280.PowerOn()\nBME280.Address(BME280_I2C_ADDRESS.ADDR_0x76)\nfunction barometer () {\n    trykk = BME280.pressure(BME280_P.Pa)\n    kitronik_VIEW128x64.show(\"Trykk: \" + trykk + \" Pa\", 4)\n}\n```\n\n\n<!-- Del 7: -->\n\n## Ferdig! \n\nGratulerer! Du har nå løst alle oppgavene du trenger for å kunne programmere en fullstendig versjon av CanSat med bruk av micro:bit!\n\n```blocks\ninput.onPinPressed(TouchPin.P0, function () {\n\n})\nradio.onReceivedNumber(function (receivedNumber) {\n\n})\ninput.onPinReleased(TouchPin.P0, function () {\n\n})\ninput.onLogoEvent(TouchButtonEvent.Pressed, function () {\n\n})\ninput.onButtonPressed(Button.A, function () {\n    if (input.buttonIsPressed(Button.A)) {\n        input.setAccelerometerRange(AcceleratorRange.OneG)\n        input.setSoundThreshold(SoundThreshold.Loud, 128)\n    } else if (input.acceleration(Dimension.X) == 0) {\n        // skjerm blokker\n        led.plot(led.brightness(), 0)\n        led.toggle(led.pointBrightness(0, 0), 0)\n        led.unplot(0, 0)\n        led.plotBarGraph(\n            0,\n            0\n        )\n        led.plotBrightness(0, 0, 255)\n        led.setBrightness(255)\n        led.enable(false)\n        led.stopAnimation()\n        led.setDisplayMode(DisplayMode.BlackAndWhite)\n    } else if (input.lightLevel() < 0) {\n        // radio blokker\n        radio.setGroup(1)\n        radio.sendNumber(0)\n        radio.sendValue(\"name\", 0)\n        radio.sendString(\"\")\n        radio.setTransmitPower(7)\n        radio.setTransmitSerialNumber(true)\n        radio.setFrequencyBand(0)\n        radio.raiseEvent(\n            EventBusSource.MICROBIT_ID_BUTTON_A,\n            EventBusValue.MICROBIT_EVT_ANY\n        )\n    } else if (input.pinIsPressed(TouchPin.P0)) {\n\n    } else if (input.isGesture(Gesture.Shake)) {\n\n    } else if (input.compassHeading() == 0) {\n\n    } else if (input.temperature() == 0) {\n\n    } else if (input.logoIsPressed()) {\n\n    } else if (\"\" == \"\") {\n\n    } else if (input.soundLevel() < input.magneticForce(Dimension.X) && input.rotation(Rotation.Pitch) == input.runningTime()) {\n\n    } else if (!(true) || false) {\n\n    } else if (input.runningTimeMicros() == 0 || 0 == 0) {\n        music.play(music.stringPlayable(\"- - - - - - - - \", 120), music.PlaybackMode.UntilDone)\n        music.play(music.tonePlayable(262, music.beat(BeatFraction.Whole)), music.PlaybackMode.UntilDone)\n        music.ringTone(262)\n        music.rest(music.beat(BeatFraction.Whole))\n        music.setVolume(music.volume())\n        music.stopAllSounds()\n        music.changeTempoBy(music.beat(BeatFraction.Whole))\n        music.setTempo(music.tempo())\n        music._playDefaultBackground(music.builtInPlayableMelody(Melodies.Dadadadum), music.PlaybackMode.InBackground)\n        music.stopMelody(MelodyStopOptions.All)\n        music.play(music.builtinPlayableSoundEffect(soundExpression.giggle), music.PlaybackMode.UntilDone)\n        music.play(music.createSoundExpression(WaveShape.Sine, 5000, 0, 255, 0, 500, SoundExpressionEffect.None, InterpolationCurve.Linear), music.PlaybackMode.UntilDone)\n        music.setBuiltInSpeakerEnabled(false)\n    } else if (music.isSoundPlaying()) {\n        tekst = (\"\" + \"this\".split(\"\") + String.fromCharCode(0).charCodeAt(0)).length\n        tekst = parseFloat(\"123\")\n        tekst = convertToText(0).charAt(0).substr(0, \"this\".compare(\"\")).indexOf(\"\")\n    } else if (led.point(0, 0)) {\n\n    } else if (BMP280.temperature() == BMP280.pressure()) {\n        BMP280.PowerOn()\n        BMP280.PowerOff()\n        BMP280.Address(BMP280_I2C_ADDRESS.ADDR_0x76)\n    } else if (Math.randomBoolean()) {\n        basic.showNumber(0 * 0 - Math.PI + 0 / (Math.min(Math.max(Math.sqrt(Math.round(randint(0, 10))), Math.abs(Math.constrain(0, 0, 0))), Math.map(0, 0, 1023, 0, 4)) % 1))\n    } else if (\"this\".includes(\"\")) {\n\n    } else if (\"this\".isEmpty()) {\n\n    } else if (pins.digitalReadPin(pins.map(\n        0,\n        0,\n        1023,\n        0,\n        4\n    )) == pins.analogReadPin(AnalogPin.P0)) {\n        pins.digitalWritePin(DigitalPin.P0, 0)\n        pins.analogWritePin(AnalogPin.P0, 1023)\n        pins.analogSetPeriod(AnalogPin.P0, 20000)\n        pins.setAudioPin(DigitalPin.P0)\n        pins.setAudioPinEnabled(false)\n        pins.servoWritePin(AnalogPin.P0, 180)\n        pins.servoSetPulse(AnalogPin.P0, 1500)\n    } else if (control.millis() == 0) {\n        control.waitForEvent(control.eventValue(), 0)\n        control.reset()\n        control.waitMicros(control.eventTimestamp())\n        control.raiseEvent(\n            EventBusSource.MICROBIT_ID_BUTTON_A,\n            EventBusValue.MICROBIT_EVT_ANY\n        )\n    } else {\n        serial.writeLine(serial.readLine())\n        serial.writeNumber(0)\n        serial.writeValue(\"\" + serial.readUntil(serial.delimiters(Delimiters.NewLine)) + serial.readString(), 0)\n        serial.writeString(\"\" + (serial.readBuffer(0)))\n        serial.writeNumbers([0, 1])\n        serial.redirect(\n            SerialPin.P0,\n            SerialPin.P1,\n            BaudRate.BaudRate115200\n        )\n        serial.redirectToUSB()\n        serial.setTxBufferSize(32)\n        serial.setRxBufferSize(32)\n        serial.setWriteLinePadding(0)\n        serial.setBaudRate(BaudRate.BaudRate115200)\n    }\n})\ninput.onGesture(Gesture.Shake, function () {\n    BMP280.temperature()\n    BMP280.pressure()\n    BMP280.PowerOn()\n    BMP280.PowerOff()\n    BMP280.Address(BMP280_I2C_ADDRESS.ADDR_0x76)\n})\nfunction doSomething() {\n\n}\nradio.onReceivedString(function (receivedString) {\n\n})\ninput.onSound(DetectedSound.Loud, function () {\n\n})\nradio.onReceivedValue(function (name, value) {\n\n})\ncontrol.onEvent(EventBusSource.MICROBIT_ID_BUTTON_A, EventBusValue.MICROBIT_EVT_ANY, function () {\n\n})\nserial.onDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n\n})\npins.onPulsed(DigitalPin.P0, PulseValue.High, function () {\n\n})\nmusic.onEvent(MusicEvent.MelodyNotePlayed, function () {\n\n})\nlet teksttabell: string[] = []\nlet tabell: number[] = []\nlet tekst = 0\n// basis blokker\nbasic.showNumber(0)\nbasic.showLeds(`\n    . . . . .\n    . . . . .\n    . . # . .\n    . . . . .\n    . . . . .\n    `)\nbasic.showIcon(IconNames.Heart)\nbasic.showString(\"Hello!\")\nbasic.clearScreen()\nbasic.pause(100)\nbasic.showArrow(ArrowNames.North)\nradio.setGroup(1)\nradio.sendNumber(0)\nradio.sendValue(\"name\", 0)\nradio.sendString(\"\")\nradio.setTransmitPower(7)\nradio.setTransmitSerialNumber(true)\nradio.setFrequencyBand(0)\nradio.raiseEvent(\n    EventBusSource.MICROBIT_ID_BUTTON_A,\n    EventBusValue.MICROBIT_EVT_ANY\n)\nloops.everyInterval(500, function () {\n\n})\nbasic.forever(function () {\n    let list: number[] = []\n    for (let index = 0; index < 4; index++) {\n\n    }\n    // løkker blokker\n    while (false) {\n\n    }\n    for (let verdi of tabell) {\n\n    }\n    for (let indeks = 0; indeks <= 4; indeks++) {\n\n    }\n    for (let index = 0; index < 5; index++) {\n\n    }\n    for (let index = 0; index < radio.receivedPacket(RadioPacketProperty.SignalStrength); index++) {\n        continue;\n        break;\n    }\n    // Logikk blokker\n    if (true) {\n\n    }\n    if (true) {\n\n    } else {\n\n    }\n    kitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(false))\n    kitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\n    kitronik_VIEW128x64.refresh()\n    kitronik_VIEW128x64.invert(kitronik_VIEW128x64.onOff(false))\n    kitronik_VIEW128x64.show(0)\n    kitronik_VIEW128x64.setPixel(0, 0)\n    kitronik_VIEW128x64.plot(0)\n    kitronik_VIEW128x64.drawLine(kitronik_VIEW128x64.LineDirectionSelection.horizontal, 10, 0, 0)\n    kitronik_VIEW128x64.drawRect(60, 30, 0, 0)\n    kitronik_VIEW128x64.clearLine(1)\n    kitronik_VIEW128x64.clearPixel(0, 0)\n    kitronik_VIEW128x64.clear()\n    // funksjoner blokker\n    doSomething()\n    // tabeller blokker\n    tabell = [tabell.length, 2, 3]\n    teksttabell = [\"ei / en / ett\", \"b\", \"c\"]\n    tabell[list.removeAt(list._pickRandom())] = list.shift()\n    tabell.push(tabell[list.pop()])\n    tabell.pop()\n    tabell = []\n    tabell[0] = 0\n    list.push(list.unshift(0))\n    list.pop()\n    tabell.shift()\n    list.unshift(0)\n    list.insertAt(0, list.indexOf(0))\n    list.removeAt(0)\n    list.reverse()\n})\nbasic.forever(function () {\n\n})\ncontrol.inBackground(function () {\n\n})\n```\n\n```package\noled-skjerm=github:oysa88/oled-skjerm\nBME280=github:oysa88/BME280\n```","pxt.json":"{\n    \"name\": \"CanSat Øving Tutorial NY\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"cansat-tutorial.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1770123154730,"editorVersion":"8.0.18","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\"></block></xml>","main.ts":"basic.forever(function () {\n\t\n})\n","README.md":"","cansat-tutorial.md":"# CanSat Øvinger Tutorial\n\n### @diffs true\n### @unifiedToolbox true\n\n<!-- Del 1: -->\n\n## CanSat Øvingsoppgaver @unplugged\n\nI denne veiledningen skal vi gå gjennom grunnleggende funksjoner som dere får bruk for når dere skal programmere en CanSat. \n\n**Oppgaver dere skal løse er: **\n\n**1)** Få et LED-lys til å blinke ved koble det til pins på micro:bit\n\n**2)** Lage en teller som teller fra 10 til 0, og så skrur på LED-lyset i 5 sekunder.\n\n**3)** Bruke en OLED-skjerm, og vise nedtellingen på skjermen.\n\n**4)** Lage et voltmeter som skriver spenningen til OLED-skjermen.\n\n**5)** Lese analogverdi fra en TMP36 (Temperatursensor) og konvertere disse til temperatur vi viser på OLED-skjermen.\n\n**6)** Koble til en BMP280 sensor, les av lufttrykk og skriv det på OLED-skjerm.\n\n**7)** Regne om barometrisk lufttrykk til relativ høyde på CanSat.\n\n**8)** Sende data mellom 2 micro:bit og lagre de i en datalogger\n\n#### **Lykke til!**\n\n\n<!-- Del 1.1: -->\n\n## Oppgave 1 - Koble LED-lys til CanSat @unplugged\n\nKoble opp kretsen som vist på bildet under.\n\nNB: Koble pluss på LED til inngangen P0 og minus til jord (GND).\n\n![microbit_øvelse_1_LED_liten.jpg](https://i.postimg.cc/KYqc9mtM/microbit_øvelse_1_LED_liten.jpg)\n\n\n<!-- Del 1.2: -->\n\n## Oppgave 1: Få LED-lyset til å skru seg AV og PÅ én gang hvert sekund.\n\nInni ``||basic: gjenta for alltid||``:\n\nFinn blokken ``||pins: skriv digital til||`` som vi skal bruke for å skru AV og PÅ LED-lyset vi har koblet til CanSat. Sett verdien til 1 for å skru lyset PÅ og 0 for å skru det AV.\n\nBruk en ``||basic: pause||`` for å si hvor lenge lyset skal være PÅ og AV.\n\n**Ekstra**: Endre hvor fort LED-lyset blinker ved å justere på tiden i ``||basic: pause||``-blokken.\n\n**HINT**: 1000 ms i ett sekund\n\n\n```blocks\nbasic.forever(function () {\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(500)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n    basic.pause(500)\n}\n```\n\n<!-- Del 2.1: -->\n\n## Oppgave 2: Telle fra 10 til 0\n\n**Når man skal lage store koder, er det vanlig å bruke ``||functions: funksjoner||``. Inni funksjonen bygger vi koden for det vi vil den skal utføre, og så kaller vi den opp når vi trenger den.**\n\nStart med å lage funksjonen ``||functions: nedtelling||``:\n\nFor å kunne telle nedover, trenger vi en variabel som kan huske tallet vår. Variabler er noe vi bruker for å at koden vår skal kunne *huske* verdiene vi jobber med. Lag en ny variabel: ``||variables: teller ||``. Plasser blokken ``||variables: sett teller til 10 ||`` inni ``||functions: nedtelling||``.\n\nSiden vi skal telle ned fra 10 til 0, bruker vi en ``||loops: FOR-løkke ||`` som lar oss gjenta løkken akkurat så mange ganger vi ønsker. \n\nSett ``||loops: gjenta for indeks ||`` til å kjøres **fra 0 til 10**.\n\nInni ``||loops: gjenta for indeks ||`` skal vi bruke en ``||basic: vis tall ||`` til å vise ``||variables: teller ||``. Og for hver gang den har vist tallet, ``||variables: endre teller med -1 ||``.\n\nHusk å kjøre ``||functions: nedtelling||`` fra ``||basic: ved start||``. Denne blokken brukes for å si når funksjonen skal kjøres.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n}\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 2.2: -->\n\n## Oppgave 2: Få LED-lys til å lyse i 5 sek. etter nedtellingen\n\nFor å få LED til å lyse i 5 sek, kan vi flytte blokkene vi har i ``||basic: gjenta for alltid ||``, over til ``||functions: nedtelling ||``. \n\nEndre ``||basic: pause ||``  mellom LED PÅ og AV til 5000 ms. *(Fjern ``||basic: pause ||`` etter ``||pins: skriv digital P0 til 0||``.)*\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 2.3: -->\n\n## Oppgave 2: Bestemme når nedtelling skal starte\n\n``||functions: Funksjonen nedtelling||`` kjører når vi starter micro:biten. Hvis vi vil at den skal kjøres på nytt, kan vi f.eks. kalle den opp når vi ``||input: trykker på knapp A||``.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\ninput.onButtonPressed(Button.A, function () {\n    nedtelling()\n})\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 3: -->\n\n## Oppgave 3: Skriv til OLED-skjerm @unplugged\n\nNå skal vi se på hvordan vi kan bruke en Kitronik OLED-skjerm for å bedre vise dataene våre. \n\nSkjermen skal kobles til mellom CanSat og micro:bit.\n\n![OLED_Kitronik_liten.jpg](https://i.postimg.cc/mD2ry8kJ/OLED_Kitronik_liten.jpg)\n\n\n<!-- Del 3.1: -->\n\n## Oppgave 3: Sette opp OLED-skjerm\n\nFra biblioteket ``||kitronik_VIEW128x64: OLED-skjerm||``, hent blokkene ``||kitronik_VIEW128x64: skru AV OLED-skjerm||`` og ``||kitronik_VIEW128x64: Sett font størrelse til Normal||``. \n\nPlasser begge blokkene inn i ``||basic: ved start||``, og sett OLED-skjerm til ``||kitronik_VIEW128x64: PÅ||`` og sett font til ``||kitronik_VIEW128x64: Stor||``.\n\n```blocks\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Big)\n```\n\n\n<!-- Del 3.2: -->\n\n## Oppgave 3: Vise nedtelling på OLED-skjermen\n\nVi skal vise nedtellingen vi lagde i forrige oppgave på OLED-skjermen vi nå har satt opp.\n\nFjern blokken ``||basic: vis tall||`` ``||variables: teller||`` fra  funksjonen ``||functions: nedtelling||``. \n\nFor å vise noe på skjermen, bruk blokken ``||kitronik_VIEW128x64: vis ||``. Trykk på pluss(+) for å utvide blokken, og bestemme hvilken linje teksten skal skrives på:\n\n- ``||kitronik_VIEW128x64: vis||``, vis ``||variables: teller||`` ``||kitronik_VIEW128x64: på linje 1||``.\n\nFor å sørge for at skjermen alltid viser riktig verdi, må vi hele tiden oppdatere OLED-skjermen. Vi må derfor plassere``||kitronik_VIEW128x64: fjerne alt på skjermen||`` inni ``||basic: gjenta for alltid||``.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        kitronik_VIEW128x64.show(teller, 1)\n        teller += -1\n        basic.pause(1000)\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\ninput.onButtonPressed(Button.A, function () {\n    nedtelling()\n})\nlet teller = 0\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Big)\nnedtelling()\nbasic.forever(function () {\n\tkitronik_VIEW128x64.clear()\n})\n\n```\n\n\n<!-- Del 4: -->\n\n## Oppgave 4: Lage et voltmeter @unplugged\n\nAlle sensorene vi skal koble til CanSat'en, gir oss en analog verdi. Noen av disse verdien må vi først regne om til en spenningsverdi, og så videre til den faktiske verdien vi kan bruke. \n\nVi må derfor lære hvordan man konverterer den analoge verdien vi får inn på micro:biten til en spenningsverdi.\n\n\n<!-- Del 4.1: -->\n\n## Oppgave 4: Lagre analog verdi fra sensor som variabel\n\nStart med å lage en ny funksjon: ``||functions: voltmeter||``.\n\nInni ``||functions: voltmeter||`` skal vi lage en ny variabel: ``||variables: analogVerdi||``. Sett ``||variables: analogVerdi||`` til å ``||pins: lese analog verdi fra P0||``.\n\n```blocks\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n```\n\n<!-- Del 4.2: -->\n\n## Oppgave 4: Vise analog verdi på OLED-skjermen\n\nInni funksjonen ``||functions: voltmeter||`` skal vi vise den analoge verdien vi får fra P0. \n\nFor å vise noe på skjermen, bruk blokken ``||kitronik_VIEW128x64: vis ||``. Trykk på pluss(+) for å utvide blokken, og bestemme hvilken linje teksten skal skrives på:\n\nFor å kunne vise både tekst og en variabel på samme linje, må vi hente ``||text: sett sammen ||`` fra biblioteket ``||text: Tekst ||``. Sett blokken inni ``||kitronik_VIEW128x64: vis ||``.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Analog: \". I den andre ruta, sette inn variabelen ``||variables: analogVerdi||``.\n\nFor å få programmet vårt til å kjøre funksjonen vi har laget, må vi legge inn blokken ``||functions: kjør voltmeter||`` inne fra ``||basic: gjenta for alltid||``. Legg oggså til en ``||basic: pause||`` på 500 ms mellom hver måling.\n\n```blocks\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\nbasic.forever(function () {\n    voltmeter()\n    basic.pause(500)\n})\n\n```\n\n\n<!-- Del 4.3: -->\n\n## Oppgave 4: Bestemme verdi på Uref\n\nNår vi skal regne ut spenningen vi måler, vil spenningen som micro:bit leverer til sensorene variere om vi får strøm fra USB eller batteri.\n\nSe tabell under for hva ``||variables: Uref||`` skal være :\n\n|   **  Spenning fra USB  **   | |   **  Spenning fra batteri  **   |\n| :------------: | | :------------: |\n| 3.2 | | 3.0 |\n\nLage en ny variabel: ``||variables: Uref||``.\n\n``||variables: Uref||`` skal settes inn i ``||basic: ved start||``, og sett den til verdien bestemt i tabellen over.\n\n\n```blocks\nlet Uref = 0\nUref = 3.2\n```\n\n\n<!-- Del 4.4: -->\n\n## Oppgave 4: Beregne spenning fra analog verdi\n\nVi har nå fått en analog verdi vi kan bruke for å regne ut spenningen over sensoren. For å gjøre dette, bruk formelen under:\n\n![Formel_spenning_fra_analogverdi_liten.png](https://i.postimg.cc/YSn2XtQv/Formel_spenning_fra_analogverdi_liten.png)\n\nLage en ny variabel: ``||variables: spenning||``.\n\nBruk formelen over for å sette ``||variables: spenning||`` til ( ``||variables: analogverdi||`` / 1024 ) * ``||variables: Uref||``.\n\n\n```blocks\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = analogVerdi / 1024 * Uref\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    basic.pause(500)\n}\n```\n\n\n<!-- Del 4.5: -->\n\n## Oppgave 4: Vis spenningsverdi på OLED-skjerm\n\nVi skal gjøre det samme som vi gjorde for å vise den analoge verdien på OLED-skjermen:\n\nHente ``||text: sett sammen ||`` fra biblioteket ``||text: Tekst ||``. Sett blokken inni en ny ``||kitronik_VIEW128x64: vis ||``. Utvid blokken og endre til å skrive på linje 2.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Spenning: \". I den andre ruta, sette inn variabelen ``||variables: spenning||``. Utvid til en tredje rute hvor du skriver \" V\".\n\nEndre skriftstørrelse på OLED-skjerm til ``||kitronik_VIEW128x64: Normal ||``.\n\n```blocks\nlet spenning = 0\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = analogVerdi / 1024 * Uref\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n    basic.pause(500)\n}\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\n```\n\n\n<!-- Del 4.6: -->\n\n## Oppgave 4: Runde av spenningsverdi\n\nNår du testet koden din, så du kanskje at det ble mange desimaler. Vi har ingen blokk som lar oss direkte avrunde til 2 desimaler. Derfor må vi multiplisere verdien vi har fått med 100, og deretter ``||math: avrund ||`` ``||variables: spenning||``. Det gir oss et heltall som er 100 ganger for stort. Hvis vi nå deler det nye tallet vårt på 100, vil vi få riktig tall, og ha flyttet kommategnet 2 plasser oppover slik at vi får en verdi med 2 desimaler.\n\nVi skal endre utregningen for variabelen ``||variables: spenning ||``. Formelen blir seende slik ut vi setter ``||variables: spenning ||`` til ``||math: avrund||`` ( ``||variables: analogVerdi||`` ``||math: / ||`` 1024 ``||math: *||`` ``||variables: Uref ||`` ``||math: *||`` 100 ) ``||math: / ||`` 100\n\n```blocks\nlet spenning = 0\nlet analogVerdi = 0\nlet faktor = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = avrund(analogVerdi / 1024 * Uref, 2)\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n    basic.pause(500)\n}\nfunction avrund (verdi: number, desimaler: number) {\n    faktor = 10 ** desimaler\n    return Math.round(verdi * faktor) / faktor\n}\n```\n\n\n<!-- Del 5: -->\n\n## Oppgave 5: Lage et termometer med TMP36 @unplugged\n\nI denne oppgaven skal vi finne temperaturen fra en TMP36 temperatursensor. \n\nKoble opp kretsen på bildet under:\n\n![Oppgave_5_TMP36_Oppkobling_liten.png](https://i.postimg.cc/Jh67TRjX/Oppgave_5_TMP36_Oppkobling_liten.png)\n\n\n<!-- Del 5.1: -->\n\n## Oppgave 5: Regne om spenningsverdi til temperatur\n\nVi skal lage en ny funksjon: ``||functions: termometer||``.\n\nInne ``||functions: termometer||``, lage en ny variabel: ``||variables: temperatur||``.\n\nBruk denne formelen for å sette ``||variables: temperatur||`` til ( ``||variables: spenning||`` - 0.5 ) / 0.01\n\n```blocks\nfunction termometer () {\n    temperatur = (spenning - 0.5) / 0.01\n}\n```\n\n<!-- Del 5.2: -->\n\n## Oppgave 5: Vise termometer på OLED-skjerm\n\n Plasser en ``||text: sett sammen ||`` inni en ny ``||kitronik_VIEW128x64: show ||``. Utvid blokken og endre til å skrive på linje 3.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Temperatur: \". I den andre ruta, sette inn variabelen ``||variables: temperatur||``. Utvid til en tredje rute hvor du skriver \" C\".\n\nKall opp funksjonen ``||functions: termometer||`` fra ``||basic: gjenta for alltid||``, og flytt ``||basic: pause 500 ms||`` fra ``||functions: voltmeter||`` til ``||basic: gjenta for alltid||``.\n\n```blocks\nfunction termometer () {\n    temperatur = (spenning - 0.5) / 0.01\n    kitronik_VIEW128x64.show(\"Temperatur: \" + temperatur + \" C\", 3)\n}\nbasic.forever(function () {\n    voltmeter()\n    termometer()\n    basic.pause(500)\n})\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = Math.trunc(analogVerdi / 1024 * Uref * 100) / 100\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n}\n```\n\n<!-- Del 6: -->\n\n## Oppgave 6: Lag et barometer @unplugged\n\n#### Vi skal bruke en ``||BMP280: BMP280||`` sensor. \n\n![BME280.png](https://i.postimg.cc/ZYjVtVRH/BME280.png)\n\nDenne sensoren kan måle:\n\n- Temperatur\n- Trykk\n- Luftfuktighet\n- Duggpunkt\n\nFor å lage et barometer skal vi bruke ``||BMP280: trykk||``.\n\n\n<!-- Del 6.1: -->\n\n## Oppgave 6: Koble opp og lese av fra BME280\n\nFor å få BME280 til å snakke med CanSat, skal vi sette opp to blokken inn i ``||basic: ved start||`` fra biblioteket ``||BMP280: BMP280||``:\n\n- ``||BME280: Power On||``\n- ``||BME280: set address 0x76||``\n\nVidere, lage en ny funksjon: ``||functions: BMP280_sensor||``.\n\nInne ``||functions: BME280_sensor||``, sett opp en ny variabel: ``||variables: trykk||``. Sett ``||variables: trykk||`` til ``||BME280: pressure||`` (fra biblioteket BME280).\n\n```blocks\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\nBME280.PowerOn()\nBME280.Address(BME280_I2C_ADDRESS.ADDR_0x76)\nfunction BME280_sensor () {\n    trykk = BME280.pressure(BME280_P.Pa)\n}\n```\n\n<!-- Del 6.2: -->\n\n## Oppgave 6: Skrive lufttrykk på OLED-skjerm\n\nKopier koden vi har brukt før for å skrive til OLED-skjerm.\n\nI den første ruta, skriv \"Trykk: \". I den andre ruta, sette inn ``||variables: trykk||``. I den tredje, skriv \" Pa\". Skriv til linje 4.\n\n```blocks\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\nBME280.PowerOn()\nBME280.Address(BME280_I2C_ADDRESS.ADDR_0x76)\nfunction barometer () {\n    trykk = BME280.pressure(BME280_P.Pa)\n    kitronik_VIEW128x64.show(\"Trykk: \" + trykk + \" Pa\", 4)\n}\n```\n\n\n<!-- Del 7: -->\n\n## Ferdig! \n\nGratulerer! Du har nå løst alle oppgavene du trenger for å kunne programmere en fullstendig versjon av CanSat med bruk av micro:bit!\n\n```blocks\ninput.onPinPressed(TouchPin.P0, function () {\n\n})\nradio.onReceivedNumber(function (receivedNumber) {\n\n})\ninput.onPinReleased(TouchPin.P0, function () {\n\n})\ninput.onLogoEvent(TouchButtonEvent.Pressed, function () {\n\n})\ninput.onButtonPressed(Button.A, function () {\n    if (input.buttonIsPressed(Button.A)) {\n        input.setAccelerometerRange(AcceleratorRange.OneG)\n        input.setSoundThreshold(SoundThreshold.Loud, 128)\n    } else if (input.acceleration(Dimension.X) == 0) {\n        // skjerm blokker\n        led.plot(led.brightness(), 0)\n        led.toggle(led.pointBrightness(0, 0), 0)\n        led.unplot(0, 0)\n        led.plotBarGraph(\n            0,\n            0\n        )\n        led.plotBrightness(0, 0, 255)\n        led.setBrightness(255)\n        led.enable(false)\n        led.stopAnimation()\n        led.setDisplayMode(DisplayMode.BlackAndWhite)\n    } else if (input.lightLevel() < 0) {\n        // radio blokker\n        radio.setGroup(1)\n        radio.sendNumber(0)\n        radio.sendValue(\"name\", 0)\n        radio.sendString(\"\")\n        radio.setTransmitPower(7)\n        radio.setTransmitSerialNumber(true)\n        radio.setFrequencyBand(0)\n        radio.raiseEvent(\n            EventBusSource.MICROBIT_ID_BUTTON_A,\n            EventBusValue.MICROBIT_EVT_ANY\n        )\n    } else if (input.pinIsPressed(TouchPin.P0)) {\n\n    } else if (input.isGesture(Gesture.Shake)) {\n\n    } else if (input.compassHeading() == 0) {\n\n    } else if (input.temperature() == 0) {\n\n    } else if (input.logoIsPressed()) {\n\n    } else if (\"\" == \"\") {\n\n    } else if (input.soundLevel() < input.magneticForce(Dimension.X) && input.rotation(Rotation.Pitch) == input.runningTime()) {\n\n    } else if (!(true) || false) {\n\n    } else if (input.runningTimeMicros() == 0 || 0 == 0) {\n        music.play(music.stringPlayable(\"- - - - - - - - \", 120), music.PlaybackMode.UntilDone)\n        music.play(music.tonePlayable(262, music.beat(BeatFraction.Whole)), music.PlaybackMode.UntilDone)\n        music.ringTone(262)\n        music.rest(music.beat(BeatFraction.Whole))\n        music.setVolume(music.volume())\n        music.stopAllSounds()\n        music.changeTempoBy(music.beat(BeatFraction.Whole))\n        music.setTempo(music.tempo())\n        music._playDefaultBackground(music.builtInPlayableMelody(Melodies.Dadadadum), music.PlaybackMode.InBackground)\n        music.stopMelody(MelodyStopOptions.All)\n        music.play(music.builtinPlayableSoundEffect(soundExpression.giggle), music.PlaybackMode.UntilDone)\n        music.play(music.createSoundExpression(WaveShape.Sine, 5000, 0, 255, 0, 500, SoundExpressionEffect.None, InterpolationCurve.Linear), music.PlaybackMode.UntilDone)\n        music.setBuiltInSpeakerEnabled(false)\n    } else if (music.isSoundPlaying()) {\n        tekst = (\"\" + \"this\".split(\"\") + String.fromCharCode(0).charCodeAt(0)).length\n        tekst = parseFloat(\"123\")\n        tekst = convertToText(0).charAt(0).substr(0, \"this\".compare(\"\")).indexOf(\"\")\n    } else if (led.point(0, 0)) {\n\n    } else if (BMP280.temperature() == BMP280.pressure()) {\n        BMP280.PowerOn()\n        BMP280.PowerOff()\n        BMP280.Address(BMP280_I2C_ADDRESS.ADDR_0x76)\n    } else if (Math.randomBoolean()) {\n        basic.showNumber(0 * 0 - Math.PI + 0 / (Math.min(Math.max(Math.sqrt(Math.round(randint(0, 10))), Math.abs(Math.constrain(0, 0, 0))), Math.map(0, 0, 1023, 0, 4)) % 1))\n    } else if (\"this\".includes(\"\")) {\n\n    } else if (\"this\".isEmpty()) {\n\n    } else if (pins.digitalReadPin(pins.map(\n        0,\n        0,\n        1023,\n        0,\n        4\n    )) == pins.analogReadPin(AnalogPin.P0)) {\n        pins.digitalWritePin(DigitalPin.P0, 0)\n        pins.analogWritePin(AnalogPin.P0, 1023)\n        pins.analogSetPeriod(AnalogPin.P0, 20000)\n        pins.setAudioPin(DigitalPin.P0)\n        pins.setAudioPinEnabled(false)\n        pins.servoWritePin(AnalogPin.P0, 180)\n        pins.servoSetPulse(AnalogPin.P0, 1500)\n    } else if (control.millis() == 0) {\n        control.waitForEvent(control.eventValue(), 0)\n        control.reset()\n        control.waitMicros(control.eventTimestamp())\n        control.raiseEvent(\n            EventBusSource.MICROBIT_ID_BUTTON_A,\n            EventBusValue.MICROBIT_EVT_ANY\n        )\n    } else {\n        serial.writeLine(serial.readLine())\n        serial.writeNumber(0)\n        serial.writeValue(\"\" + serial.readUntil(serial.delimiters(Delimiters.NewLine)) + serial.readString(), 0)\n        serial.writeString(\"\" + (serial.readBuffer(0)))\n        serial.writeNumbers([0, 1])\n        serial.redirect(\n            SerialPin.P0,\n            SerialPin.P1,\n            BaudRate.BaudRate115200\n        )\n        serial.redirectToUSB()\n        serial.setTxBufferSize(32)\n        serial.setRxBufferSize(32)\n        serial.setWriteLinePadding(0)\n        serial.setBaudRate(BaudRate.BaudRate115200)\n    }\n})\ninput.onGesture(Gesture.Shake, function () {\n    BMP280.temperature()\n    BMP280.pressure()\n    BMP280.PowerOn()\n    BMP280.PowerOff()\n    BMP280.Address(BMP280_I2C_ADDRESS.ADDR_0x76)\n})\nfunction doSomething() {\n\n}\nradio.onReceivedString(function (receivedString) {\n\n})\ninput.onSound(DetectedSound.Loud, function () {\n\n})\nradio.onReceivedValue(function (name, value) {\n\n})\ncontrol.onEvent(EventBusSource.MICROBIT_ID_BUTTON_A, EventBusValue.MICROBIT_EVT_ANY, function () {\n\n})\nserial.onDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n\n})\npins.onPulsed(DigitalPin.P0, PulseValue.High, function () {\n\n})\nmusic.onEvent(MusicEvent.MelodyNotePlayed, function () {\n\n})\nlet teksttabell: string[] = []\nlet tabell: number[] = []\nlet tekst = 0\n// basis blokker\nbasic.showNumber(0)\nbasic.showLeds(`\n    . . . . .\n    . . . . .\n    . . # . .\n    . . . . .\n    . . . . .\n    `)\nbasic.showIcon(IconNames.Heart)\nbasic.showString(\"Hello!\")\nbasic.clearScreen()\nbasic.pause(100)\nbasic.showArrow(ArrowNames.North)\nradio.setGroup(1)\nradio.sendNumber(0)\nradio.sendValue(\"name\", 0)\nradio.sendString(\"\")\nradio.setTransmitPower(7)\nradio.setTransmitSerialNumber(true)\nradio.setFrequencyBand(0)\nradio.raiseEvent(\n    EventBusSource.MICROBIT_ID_BUTTON_A,\n    EventBusValue.MICROBIT_EVT_ANY\n)\nloops.everyInterval(500, function () {\n\n})\nbasic.forever(function () {\n    let list: number[] = []\n    for (let index = 0; index < 4; index++) {\n\n    }\n    // løkker blokker\n    while (false) {\n\n    }\n    for (let verdi of tabell) {\n\n    }\n    for (let indeks = 0; indeks <= 4; indeks++) {\n\n    }\n    for (let index = 0; index < 5; index++) {\n\n    }\n    for (let index = 0; index < radio.receivedPacket(RadioPacketProperty.SignalStrength); index++) {\n        continue;\n        break;\n    }\n    // Logikk blokker\n    if (true) {\n\n    }\n    if (true) {\n\n    } else {\n\n    }\n    kitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(false))\n    kitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\n    kitronik_VIEW128x64.refresh()\n    kitronik_VIEW128x64.invert(kitronik_VIEW128x64.onOff(false))\n    kitronik_VIEW128x64.show(0)\n    kitronik_VIEW128x64.setPixel(0, 0)\n    kitronik_VIEW128x64.plot(0)\n    kitronik_VIEW128x64.drawLine(kitronik_VIEW128x64.LineDirectionSelection.horizontal, 10, 0, 0)\n    kitronik_VIEW128x64.drawRect(60, 30, 0, 0)\n    kitronik_VIEW128x64.clearLine(1)\n    kitronik_VIEW128x64.clearPixel(0, 0)\n    kitronik_VIEW128x64.clear()\n    // funksjoner blokker\n    doSomething()\n    // tabeller blokker\n    tabell = [tabell.length, 2, 3]\n    teksttabell = [\"ei / en / ett\", \"b\", \"c\"]\n    tabell[list.removeAt(list._pickRandom())] = list.shift()\n    tabell.push(tabell[list.pop()])\n    tabell.pop()\n    tabell = []\n    tabell[0] = 0\n    list.push(list.unshift(0))\n    list.pop()\n    tabell.shift()\n    list.unshift(0)\n    list.insertAt(0, list.indexOf(0))\n    list.removeAt(0)\n    list.reverse()\n})\nbasic.forever(function () {\n\n})\ncontrol.inBackground(function () {\n\n})\n```\n\n```package\noled-skjerm=github:oysa88/oled-skjerm\nBME280=github:oysa88/BME280\n```","pxt.json":"{\n    \"name\": \"CanSat Øving Tutorial NY\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"cansat-tutorial.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1770125292048,"editorVersion":"8.0.18","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\"></block></xml>","main.ts":"basic.forever(function () {\n\t\n})\n","README.md":"","cansat-tutorial.md":"# CanSat Øvinger Tutorial\n\n### @diffs true\n### @unifiedToolbox true\n\n<!-- Del 1: -->\n\n## CanSat Øvingsoppgaver @unplugged\n\nI denne veiledningen skal vi gå gjennom grunnleggende funksjoner som dere får bruk for når dere skal programmere en CanSat. \n\n**Oppgaver dere skal løse er: **\n\n**1)** Få et LED-lys til å blinke ved koble det til pins på micro:bit\n\n**2)** Lage en teller som teller fra 10 til 0, og så skrur på LED-lyset i 5 sekunder.\n\n**3)** Bruke en OLED-skjerm, og vise nedtellingen på skjermen.\n\n**4)** Lage et voltmeter som skriver spenningen til OLED-skjermen.\n\n**5)** Lese analogverdi fra en TMP36 (Temperatursensor) og konvertere disse til temperatur vi viser på OLED-skjermen.\n\n**6)** Koble til en BMP280 sensor, les av lufttrykk og skriv det på OLED-skjerm.\n\n**7)** Regne om barometrisk lufttrykk til relativ høyde på CanSat.\n\n**8)** Sende data mellom 2 micro:bit og lagre de i en datalogger\n\n#### **Lykke til!**\n\n\n<!-- Del 1.1: -->\n\n## Oppgave 1 - Koble LED-lys til CanSat @unplugged\n\nKoble opp kretsen som vist på bildet under.\n\nNB: Koble pluss på LED til inngangen P0 og minus til jord (GND).\n\n![microbit_øvelse_1_LED_liten.jpg](https://i.postimg.cc/KYqc9mtM/microbit_øvelse_1_LED_liten.jpg)\n\n\n<!-- Del 1.2: -->\n\n## Oppgave 1: Få LED-lyset til å skru seg AV og PÅ én gang hvert sekund.\n\nInni ``||basic: gjenta for alltid||``:\n\nFinn blokken ``||pins: skriv digital til||`` som vi skal bruke for å skru AV og PÅ LED-lyset vi har koblet til CanSat. Sett verdien til 1 for å skru lyset PÅ og 0 for å skru det AV.\n\nBruk en ``||basic: pause||`` for å si hvor lenge lyset skal være PÅ og AV.\n\n**Ekstra**: Endre hvor fort LED-lyset blinker ved å justere på tiden i ``||basic: pause||``-blokken.\n\n**HINT**: 1000 ms i ett sekund\n\n\n```blocks\nbasic.forever(function () {\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(500)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n    basic.pause(500)\n}\n```\n\n<!-- Del 2.1: -->\n\n## Oppgave 2: Telle fra 10 til 0\n\n**Når man skal lage store koder, er det vanlig å bruke ``||functions: funksjoner||``. Inni funksjonen bygger vi koden for det vi vil den skal utføre, og så kaller vi den opp når vi trenger den.**\n\nStart med å lage funksjonen ``||functions: nedtelling||``:\n\nFor å kunne telle nedover, trenger vi en variabel som kan huske tallet vår. Variabler er noe vi bruker for å at koden vår skal kunne *huske* verdiene vi jobber med. Lag en ny variabel: ``||variables: teller ||``. Plasser blokken ``||variables: sett teller til 10 ||`` inni ``||functions: nedtelling||``.\n\nSiden vi skal telle ned fra 10 til 0, bruker vi en ``||loops: FOR-løkke ||`` som lar oss gjenta løkken akkurat så mange ganger vi ønsker. \n\nSett ``||loops: gjenta for indeks ||`` til å kjøres **fra 0 til 10**.\n\nInni ``||loops: gjenta for indeks ||`` skal vi bruke en ``||basic: vis tall ||`` til å vise ``||variables: teller ||``. Og for hver gang den har vist tallet, ``||variables: endre teller med -1 ||``.\n\nHusk å kjøre ``||functions: nedtelling||`` fra ``||basic: ved start||``. Denne blokken brukes for å si når funksjonen skal kjøres.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n}\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 2.2: -->\n\n## Oppgave 2: Få LED-lys til å lyse i 5 sek. etter nedtellingen\n\nFor å få LED til å lyse i 5 sek, kan vi flytte blokkene vi har i ``||basic: gjenta for alltid ||``, over til ``||functions: nedtelling ||``. \n\nEndre ``||basic: pause ||``  mellom LED PÅ og AV til 5000 ms. *(Fjern ``||basic: pause ||`` etter ``||pins: skriv digital P0 til 0||``.)*\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 2.3: -->\n\n## Oppgave 2: Bestemme når nedtelling skal starte\n\n``||functions: Funksjonen nedtelling||`` kjører når vi starter micro:biten. Hvis vi vil at den skal kjøres på nytt, kan vi f.eks. kalle den opp når vi ``||input: trykker på knapp A||``.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\ninput.onButtonPressed(Button.A, function () {\n    nedtelling()\n})\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 3: -->\n\n## Oppgave 3: Skriv til OLED-skjerm @unplugged\n\nNå skal vi se på hvordan vi kan bruke en Kitronik OLED-skjerm for å bedre vise dataene våre. \n\nSkjermen skal kobles til mellom CanSat og micro:bit.\n\n![OLED_Kitronik_liten.jpg](https://i.postimg.cc/mD2ry8kJ/OLED_Kitronik_liten.jpg)\n\n\n<!-- Del 3.1: -->\n\n## Oppgave 3: Sette opp OLED-skjerm\n\nFra biblioteket ``||kitronik_VIEW128x64: OLED-skjerm||``, hent blokkene ``||kitronik_VIEW128x64: skru AV OLED-skjerm||`` og ``||kitronik_VIEW128x64: Sett font størrelse til Normal||``. \n\nPlasser begge blokkene inn i ``||basic: ved start||``, og sett OLED-skjerm til ``||kitronik_VIEW128x64: PÅ||`` og sett font til ``||kitronik_VIEW128x64: Stor||``.\n\n```blocks\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Big)\n```\n\n\n<!-- Del 3.2: -->\n\n## Oppgave 3: Vise nedtelling på OLED-skjermen\n\nVi skal vise nedtellingen vi lagde i forrige oppgave på OLED-skjermen vi nå har satt opp.\n\nFjern blokken ``||basic: vis tall||`` ``||variables: teller||`` fra  funksjonen ``||functions: nedtelling||``. \n\nFor å vise noe på skjermen, bruk blokken ``||kitronik_VIEW128x64: vis ||``. Trykk på pluss(+) for å utvide blokken, og bestemme hvilken linje teksten skal skrives på:\n\n- ``||kitronik_VIEW128x64: vis||``, vis ``||variables: teller||`` ``||kitronik_VIEW128x64: på linje 1||``.\n\nFor å sørge for at skjermen alltid viser riktig verdi, må vi hele tiden oppdatere OLED-skjermen. Vi må derfor plassere``||kitronik_VIEW128x64: fjerne alt på skjermen||`` inni ``||basic: gjenta for alltid||``.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        kitronik_VIEW128x64.show(teller, 1)\n        teller += -1\n        basic.pause(1000)\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\ninput.onButtonPressed(Button.A, function () {\n    nedtelling()\n})\nlet teller = 0\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Big)\nnedtelling()\nbasic.forever(function () {\n\tkitronik_VIEW128x64.clear()\n})\n\n```\n\n\n<!-- Del 4: -->\n\n## Oppgave 4: Lage et voltmeter @unplugged\n\nAlle sensorene vi skal koble til CanSat'en, gir oss en analog verdi. Noen av disse verdien må vi først regne om til en spenningsverdi, og så videre til den faktiske verdien vi kan bruke. \n\nVi må derfor lære hvordan man konverterer den analoge verdien vi får inn på micro:biten til en spenningsverdi.\n\n\n<!-- Del 4.1: -->\n\n## Oppgave 4: Lagre analog verdi fra sensor som variabel\n\nStart med å lage en ny funksjon: ``||functions: voltmeter||``.\n\nInni ``||functions: voltmeter||`` skal vi lage en ny variabel: ``||variables: analogVerdi||``. Sett ``||variables: analogVerdi||`` til å ``||pins: lese analog verdi fra P0||``.\n\n```blocks\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n```\n\n<!-- Del 4.2: -->\n\n## Oppgave 4: Vise analog verdi på OLED-skjermen\n\nInni funksjonen ``||functions: voltmeter||`` skal vi vise den analoge verdien vi får fra P0. \n\nFor å vise noe på skjermen, bruk blokken ``||kitronik_VIEW128x64: vis ||``. Trykk på pluss(+) for å utvide blokken, og bestemme hvilken linje teksten skal skrives på:\n\nFor å kunne vise både tekst og en variabel på samme linje, må vi hente ``||text: sett sammen ||`` fra biblioteket ``||text: Tekst ||``. Sett blokken inni ``||kitronik_VIEW128x64: vis ||``.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Analog: \". I den andre ruta, sette inn variabelen ``||variables: analogVerdi||``.\n\nFor å få programmet vårt til å kjøre funksjonen vi har laget, må vi legge inn blokken ``||functions: kjør voltmeter||`` inne fra ``||basic: gjenta for alltid||``. Legg oggså til en ``||basic: pause||`` på 500 ms mellom hver måling.\n\n```blocks\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n}\nbasic.forever(function () {\n    voltmeter()\n    basic.pause(500)\n})\n```\n\n\n<!-- Del 4.3: -->\n\n## Oppgave 4: Bestemme verdi på Uref\n\nNår vi skal regne ut spenningen vi måler, vil spenningen som micro:bit leverer til sensorene variere om vi får strøm fra USB eller batteri.\n\nSe tabell under for hva ``||variables: Uref||`` skal være :\n\n|   **  Spenning fra USB  **   | |   **  Spenning fra batteri  **   |\n| :------------: | | :------------: |\n| 3.2 | | 3.0 |\n\nLage en ny variabel: ``||variables: Uref||``.\n\n``||variables: Uref||`` skal settes inn i ``||basic: ved start||``, og sett den til verdien bestemt i tabellen over.\n\n\n```blocks\nlet Uref = 0\nUref = 3.2\n```\n\n\n<!-- Del 4.4: -->\n\n## Oppgave 4: Beregne spenning fra analog verdi\n\nVi har nå fått en analog verdi vi kan bruke for å regne ut spenningen over sensoren. For å gjøre dette, bruk formelen under:\n\n![Formel_spenning_fra_analogverdi_liten.png](https://i.postimg.cc/YSn2XtQv/Formel_spenning_fra_analogverdi_liten.png)\n\nLage en ny variabel: ``||variables: spenning||``.\n\nBruk formelen over for å sette ``||variables: spenning||`` til ( ``||variables: analogverdi||`` / 1024 ) * ``||variables: Uref||``.\n\n\n```blocks\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = analogVerdi / 1024 * Uref\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    basic.pause(500)\n}\n```\n\n\n<!-- Del 4.5: -->\n\n## Oppgave 4: Vis spenningsverdi på OLED-skjerm\n\nVi skal gjøre det samme som vi gjorde for å vise den analoge verdien på OLED-skjermen:\n\nHente ``||text: sett sammen ||`` fra biblioteket ``||text: Tekst ||``. Sett blokken inni en ny ``||kitronik_VIEW128x64: vis ||``. Utvid blokken og endre til å skrive på linje 2.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Spenning: \". I den andre ruta, sette inn variabelen ``||variables: spenning||``. Utvid til en tredje rute hvor du skriver \" V\".\n\nEndre skriftstørrelse på OLED-skjerm til ``||kitronik_VIEW128x64: Normal ||``.\n\n```blocks\nlet spenning = 0\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = analogVerdi / 1024 * Uref\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n    basic.pause(500)\n}\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\n```\n\n\n<!-- Del 4.6: -->\n\n## Oppgave 4: Runde av spenningsverdi\n\nNår du testet koden din, så du kanskje at det ble mange desimaler. Vi har ingen blokk som lar oss direkte avrunde til 2 desimaler. Det vi må gjøre er å lage en funksjon som tar den verdien vår med mange deimaler og returnerer en verdi med ønsket antall desimaler. \n\nI denne funksjonen skal vi multiplisere verdien vi har fått med 10 opphøyd i antall desimaler vi ønsker. Deretter skal vi ``||math: avrund ||`` verdien. Det gir oss et heltall. Hvis vi nå deler det nye avrundede tallet vårt med det samme tallet som vi ganget med, vil vi få riktig verdi vi kan returnere til formelen vår med riktig antall desimaler.\n\nVi skal endre utregningen for variabelen ``||variables: spenning ||``. Formelen blir seende slik ut vi setter ``||variables: spenning ||`` til ``||math: avrund||`` ( ``||variables: analogVerdi||`` ``||math: / ||`` 1024 ``||math: *||`` ``||variables: Uref ||`` ``||math: *||`` 100 ) ``||math: / ||`` 100\n\n```blocks\nlet spenning = 0\nlet analogVerdi = 0\nlet faktor = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = avrund(analogVerdi / 1024 * Uref, 2)\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n    basic.pause(500)\n}\nfunction avrund (verdi: number, desimaler: number) {\n    faktor = 10 ** desimaler\n    return Math.round(verdi * faktor) / faktor\n}\n```\n\n\n<!-- Del 5: -->\n\n## Oppgave 5: Lage et termometer med TMP36 @unplugged\n\nI denne oppgaven skal vi finne temperaturen fra en TMP36 temperatursensor. \n\nKoble opp kretsen på bildet under:\n\n![Oppgave_5_TMP36_Oppkobling_liten.png](https://i.postimg.cc/Jh67TRjX/Oppgave_5_TMP36_Oppkobling_liten.png)\n\n\n<!-- Del 5.1: -->\n\n## Oppgave 5: Regne om spenningsverdi til temperatur\n\nVi skal lage en ny funksjon: ``||functions: termometer||``.\n\nInne ``||functions: termometer||``, lage en ny variabel: ``||variables: temperatur||``.\n\nBruk denne formelen for å sette ``||variables: temperatur||`` til ( ``||variables: spenning||`` - 0.5 ) / 0.01\n\n```blocks\nfunction termometer () {\n    temperatur = (spenning - 0.5) / 0.01\n}\n```\n\n<!-- Del 5.2: -->\n\n## Oppgave 5: Vise termometer på OLED-skjerm\n\n Plasser en ``||text: sett sammen ||`` inni en ny ``||kitronik_VIEW128x64: show ||``. Utvid blokken og endre til å skrive på linje 3.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Temperatur: \". I den andre ruta, sette inn variabelen ``||variables: temperatur||``. Utvid til en tredje rute hvor du skriver \" C\".\n\nKall opp funksjonen ``||functions: termometer||`` fra ``||basic: gjenta for alltid||``, og flytt ``||basic: pause 500 ms||`` fra ``||functions: voltmeter||`` til ``||basic: gjenta for alltid||``.\n\n```blocks\nfunction termometer () {\n    temperatur = (spenning - 0.5) / 0.01\n    kitronik_VIEW128x64.show(\"Temperatur: \" + temperatur + \" C\", 3)\n}\nbasic.forever(function () {\n    voltmeter()\n    termometer()\n    basic.pause(500)\n})\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = Math.trunc(analogVerdi / 1024 * Uref * 100) / 100\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n}\n```\n\n<!-- Del 6: -->\n\n## Oppgave 6: Lag et barometer @unplugged\n\n#### Vi skal bruke en ``||BMP280: BMP280||`` sensor. \n\n![BME280.png](https://i.postimg.cc/ZYjVtVRH/BME280.png)\n\nDenne sensoren kan måle:\n\n- Temperatur\n- Trykk\n- Luftfuktighet\n- Duggpunkt\n\nFor å lage et barometer skal vi bruke ``||BMP280: trykk||``.\n\n\n<!-- Del 6.1: -->\n\n## Oppgave 6: Koble opp og lese av fra BME280\n\nFor å få BME280 til å snakke med CanSat, skal vi sette opp to blokken inn i ``||basic: ved start||`` fra biblioteket ``||BMP280: BMP280||``:\n\n- ``||BME280: Power On||``\n- ``||BME280: set address 0x76||``\n\nVidere, lage en ny funksjon: ``||functions: BMP280_sensor||``.\n\nInne ``||functions: BME280_sensor||``, sett opp en ny variabel: ``||variables: trykk||``. Sett ``||variables: trykk||`` til ``||BME280: pressure||`` (fra biblioteket BME280).\n\n```blocks\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\nBME280.PowerOn()\nBME280.Address(BME280_I2C_ADDRESS.ADDR_0x76)\nfunction BME280_sensor () {\n    trykk = BME280.pressure(BME280_P.Pa)\n}\n```\n\n<!-- Del 6.2: -->\n\n## Oppgave 6: Skrive lufttrykk på OLED-skjerm\n\nKopier koden vi har brukt før for å skrive til OLED-skjerm.\n\nI den første ruta, skriv \"Trykk: \". I den andre ruta, sette inn ``||variables: trykk||``. I den tredje, skriv \" Pa\". Skriv til linje 4.\n\n```blocks\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\nBME280.PowerOn()\nBME280.Address(BME280_I2C_ADDRESS.ADDR_0x76)\nfunction barometer () {\n    trykk = BME280.pressure(BME280_P.Pa)\n    kitronik_VIEW128x64.show(\"Trykk: \" + trykk + \" Pa\", 4)\n}\n```\n\n\n<!-- Del 7: -->\n\n## Ferdig! \n\nGratulerer! Du har nå løst alle oppgavene du trenger for å kunne programmere en fullstendig versjon av CanSat med bruk av micro:bit!\n\n```blocks\ninput.onPinPressed(TouchPin.P0, function () {\n\n})\nradio.onReceivedNumber(function (receivedNumber) {\n\n})\ninput.onPinReleased(TouchPin.P0, function () {\n\n})\ninput.onLogoEvent(TouchButtonEvent.Pressed, function () {\n\n})\ninput.onButtonPressed(Button.A, function () {\n    if (input.buttonIsPressed(Button.A)) {\n        input.setAccelerometerRange(AcceleratorRange.OneG)\n        input.setSoundThreshold(SoundThreshold.Loud, 128)\n    } else if (input.acceleration(Dimension.X) == 0) {\n        // skjerm blokker\n        led.plot(led.brightness(), 0)\n        led.toggle(led.pointBrightness(0, 0), 0)\n        led.unplot(0, 0)\n        led.plotBarGraph(\n            0,\n            0\n        )\n        led.plotBrightness(0, 0, 255)\n        led.setBrightness(255)\n        led.enable(false)\n        led.stopAnimation()\n        led.setDisplayMode(DisplayMode.BlackAndWhite)\n    } else if (input.lightLevel() < 0) {\n        // radio blokker\n        radio.setGroup(1)\n        radio.sendNumber(0)\n        radio.sendValue(\"name\", 0)\n        radio.sendString(\"\")\n        radio.setTransmitPower(7)\n        radio.setTransmitSerialNumber(true)\n        radio.setFrequencyBand(0)\n        radio.raiseEvent(\n            EventBusSource.MICROBIT_ID_BUTTON_A,\n            EventBusValue.MICROBIT_EVT_ANY\n        )\n    } else if (input.pinIsPressed(TouchPin.P0)) {\n\n    } else if (input.isGesture(Gesture.Shake)) {\n\n    } else if (input.compassHeading() == 0) {\n\n    } else if (input.temperature() == 0) {\n\n    } else if (input.logoIsPressed()) {\n\n    } else if (\"\" == \"\") {\n\n    } else if (input.soundLevel() < input.magneticForce(Dimension.X) && input.rotation(Rotation.Pitch) == input.runningTime()) {\n\n    } else if (!(true) || false) {\n\n    } else if (input.runningTimeMicros() == 0 || 0 == 0) {\n        music.play(music.stringPlayable(\"- - - - - - - - \", 120), music.PlaybackMode.UntilDone)\n        music.play(music.tonePlayable(262, music.beat(BeatFraction.Whole)), music.PlaybackMode.UntilDone)\n        music.ringTone(262)\n        music.rest(music.beat(BeatFraction.Whole))\n        music.setVolume(music.volume())\n        music.stopAllSounds()\n        music.changeTempoBy(music.beat(BeatFraction.Whole))\n        music.setTempo(music.tempo())\n        music._playDefaultBackground(music.builtInPlayableMelody(Melodies.Dadadadum), music.PlaybackMode.InBackground)\n        music.stopMelody(MelodyStopOptions.All)\n        music.play(music.builtinPlayableSoundEffect(soundExpression.giggle), music.PlaybackMode.UntilDone)\n        music.play(music.createSoundExpression(WaveShape.Sine, 5000, 0, 255, 0, 500, SoundExpressionEffect.None, InterpolationCurve.Linear), music.PlaybackMode.UntilDone)\n        music.setBuiltInSpeakerEnabled(false)\n    } else if (music.isSoundPlaying()) {\n        tekst = (\"\" + \"this\".split(\"\") + String.fromCharCode(0).charCodeAt(0)).length\n        tekst = parseFloat(\"123\")\n        tekst = convertToText(0).charAt(0).substr(0, \"this\".compare(\"\")).indexOf(\"\")\n    } else if (led.point(0, 0)) {\n\n    } else if (BMP280.temperature() == BMP280.pressure()) {\n        BMP280.PowerOn()\n        BMP280.PowerOff()\n        BMP280.Address(BMP280_I2C_ADDRESS.ADDR_0x76)\n    } else if (Math.randomBoolean()) {\n        basic.showNumber(0 * 0 - Math.PI + 0 / (Math.min(Math.max(Math.sqrt(Math.round(randint(0, 10))), Math.abs(Math.constrain(0, 0, 0))), Math.map(0, 0, 1023, 0, 4)) % 1))\n    } else if (\"this\".includes(\"\")) {\n\n    } else if (\"this\".isEmpty()) {\n\n    } else if (pins.digitalReadPin(pins.map(\n        0,\n        0,\n        1023,\n        0,\n        4\n    )) == pins.analogReadPin(AnalogPin.P0)) {\n        pins.digitalWritePin(DigitalPin.P0, 0)\n        pins.analogWritePin(AnalogPin.P0, 1023)\n        pins.analogSetPeriod(AnalogPin.P0, 20000)\n        pins.setAudioPin(DigitalPin.P0)\n        pins.setAudioPinEnabled(false)\n        pins.servoWritePin(AnalogPin.P0, 180)\n        pins.servoSetPulse(AnalogPin.P0, 1500)\n    } else if (control.millis() == 0) {\n        control.waitForEvent(control.eventValue(), 0)\n        control.reset()\n        control.waitMicros(control.eventTimestamp())\n        control.raiseEvent(\n            EventBusSource.MICROBIT_ID_BUTTON_A,\n            EventBusValue.MICROBIT_EVT_ANY\n        )\n    } else {\n        serial.writeLine(serial.readLine())\n        serial.writeNumber(0)\n        serial.writeValue(\"\" + serial.readUntil(serial.delimiters(Delimiters.NewLine)) + serial.readString(), 0)\n        serial.writeString(\"\" + (serial.readBuffer(0)))\n        serial.writeNumbers([0, 1])\n        serial.redirect(\n            SerialPin.P0,\n            SerialPin.P1,\n            BaudRate.BaudRate115200\n        )\n        serial.redirectToUSB()\n        serial.setTxBufferSize(32)\n        serial.setRxBufferSize(32)\n        serial.setWriteLinePadding(0)\n        serial.setBaudRate(BaudRate.BaudRate115200)\n    }\n})\ninput.onGesture(Gesture.Shake, function () {\n    BMP280.temperature()\n    BMP280.pressure()\n    BMP280.PowerOn()\n    BMP280.PowerOff()\n    BMP280.Address(BMP280_I2C_ADDRESS.ADDR_0x76)\n})\nfunction doSomething() {\n\n}\nradio.onReceivedString(function (receivedString) {\n\n})\ninput.onSound(DetectedSound.Loud, function () {\n\n})\nradio.onReceivedValue(function (name, value) {\n\n})\ncontrol.onEvent(EventBusSource.MICROBIT_ID_BUTTON_A, EventBusValue.MICROBIT_EVT_ANY, function () {\n\n})\nserial.onDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n\n})\npins.onPulsed(DigitalPin.P0, PulseValue.High, function () {\n\n})\nmusic.onEvent(MusicEvent.MelodyNotePlayed, function () {\n\n})\nlet teksttabell: string[] = []\nlet tabell: number[] = []\nlet tekst = 0\n// basis blokker\nbasic.showNumber(0)\nbasic.showLeds(`\n    . . . . .\n    . . . . .\n    . . # . .\n    . . . . .\n    . . . . .\n    `)\nbasic.showIcon(IconNames.Heart)\nbasic.showString(\"Hello!\")\nbasic.clearScreen()\nbasic.pause(100)\nbasic.showArrow(ArrowNames.North)\nradio.setGroup(1)\nradio.sendNumber(0)\nradio.sendValue(\"name\", 0)\nradio.sendString(\"\")\nradio.setTransmitPower(7)\nradio.setTransmitSerialNumber(true)\nradio.setFrequencyBand(0)\nradio.raiseEvent(\n    EventBusSource.MICROBIT_ID_BUTTON_A,\n    EventBusValue.MICROBIT_EVT_ANY\n)\nloops.everyInterval(500, function () {\n\n})\nbasic.forever(function () {\n    let list: number[] = []\n    for (let index = 0; index < 4; index++) {\n\n    }\n    // løkker blokker\n    while (false) {\n\n    }\n    for (let verdi of tabell) {\n\n    }\n    for (let indeks = 0; indeks <= 4; indeks++) {\n\n    }\n    for (let index = 0; index < 5; index++) {\n\n    }\n    for (let index = 0; index < radio.receivedPacket(RadioPacketProperty.SignalStrength); index++) {\n        continue;\n        break;\n    }\n    // Logikk blokker\n    if (true) {\n\n    }\n    if (true) {\n\n    } else {\n\n    }\n    kitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(false))\n    kitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\n    kitronik_VIEW128x64.refresh()\n    kitronik_VIEW128x64.invert(kitronik_VIEW128x64.onOff(false))\n    kitronik_VIEW128x64.show(0)\n    kitronik_VIEW128x64.setPixel(0, 0)\n    kitronik_VIEW128x64.plot(0)\n    kitronik_VIEW128x64.drawLine(kitronik_VIEW128x64.LineDirectionSelection.horizontal, 10, 0, 0)\n    kitronik_VIEW128x64.drawRect(60, 30, 0, 0)\n    kitronik_VIEW128x64.clearLine(1)\n    kitronik_VIEW128x64.clearPixel(0, 0)\n    kitronik_VIEW128x64.clear()\n    // funksjoner blokker\n    doSomething()\n    // tabeller blokker\n    tabell = [tabell.length, 2, 3]\n    teksttabell = [\"ei / en / ett\", \"b\", \"c\"]\n    tabell[list.removeAt(list._pickRandom())] = list.shift()\n    tabell.push(tabell[list.pop()])\n    tabell.pop()\n    tabell = []\n    tabell[0] = 0\n    list.push(list.unshift(0))\n    list.pop()\n    tabell.shift()\n    list.unshift(0)\n    list.insertAt(0, list.indexOf(0))\n    list.removeAt(0)\n    list.reverse()\n})\nbasic.forever(function () {\n\n})\ncontrol.inBackground(function () {\n\n})\n```\n\n```package\noled-skjerm=github:oysa88/oled-skjerm\nBME280=github:oysa88/BME280\n```","pxt.json":"{\n    \"name\": \"CanSat Øving Tutorial NY\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"cansat-tutorial.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1770127744015,"editorVersion":"8.0.18","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\"></block></xml>","main.ts":"basic.forever(function () {\n\t\n})\n","README.md":"","cansat-tutorial.md":"# CanSat Øvinger Tutorial\n\n### @diffs true\n### @unifiedToolbox true\n\n<!-- Del 1: -->\n\n## CanSat Øvingsoppgaver @unplugged\n\nI denne veiledningen skal vi gå gjennom grunnleggende funksjoner som dere får bruk for når dere skal programmere en CanSat. \n\n**Oppgaver dere skal løse er: **\n\n**1)** Få et LED-lys til å blinke ved koble det til pins på micro:bit\n\n**2)** Lage en teller som teller fra 10 til 0, og så skrur på LED-lyset i 5 sekunder.\n\n**3)** Bruke en OLED-skjerm, og vise nedtellingen på skjermen.\n\n**4)** Lage et voltmeter som skriver spenningen til OLED-skjermen.\n\n**5)** Lese analogverdi fra en TMP36 (Temperatursensor) og konvertere disse til temperatur vi viser på OLED-skjermen.\n\n**6)** Koble til en BMP280 sensor, les av lufttrykk og skriv det på OLED-skjerm.\n\n**7)** Regne om barometrisk lufttrykk til relativ høyde på CanSat.\n\n**8)** Sende data mellom 2 micro:bit og lagre de i en datalogger\n\n#### **Lykke til!**\n\n\n<!-- Del 1.1: -->\n\n## Oppgave 1 - Koble LED-lys til CanSat @unplugged\n\nKoble opp kretsen som vist på bildet under.\n\nNB: Koble pluss på LED til inngangen P0 og minus til jord (GND).\n\n![microbit_øvelse_1_LED_liten.jpg](https://i.postimg.cc/KYqc9mtM/microbit_øvelse_1_LED_liten.jpg)\n\n\n<!-- Del 1.2: -->\n\n## Oppgave 1: Få LED-lyset til å skru seg AV og PÅ én gang hvert sekund.\n\nInni ``||basic: gjenta for alltid||``:\n\nFinn blokken ``||pins: skriv digital til||`` som vi skal bruke for å skru AV og PÅ LED-lyset vi har koblet til CanSat. Sett verdien til 1 for å skru lyset PÅ og 0 for å skru det AV.\n\nBruk en ``||basic: pause||`` for å si hvor lenge lyset skal være PÅ og AV.\n\n**Ekstra**: Endre hvor fort LED-lyset blinker ved å justere på tiden i ``||basic: pause||``-blokken.\n\n**HINT**: 1000 ms i ett sekund\n\n\n```blocks\nbasic.forever(function () {\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(500)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n    basic.pause(500)\n}\n```\n\n<!-- Del 2.1: -->\n\n## Oppgave 2: Telle fra 10 til 0\n\n**Når man skal lage store koder, er det vanlig å bruke ``||functions: funksjoner||``. Inni funksjonen bygger vi koden for det vi vil den skal utføre, og så kaller vi den opp når vi trenger den.**\n\nStart med å lage funksjonen ``||functions: nedtelling||``:\n\nFor å kunne telle nedover, trenger vi en variabel som kan huske tallet vår. Variabler er noe vi bruker for å at koden vår skal kunne *huske* verdiene vi jobber med. Lag en ny variabel: ``||variables: teller ||``. Plasser blokken ``||variables: sett teller til 10 ||`` inni ``||functions: nedtelling||``.\n\nSiden vi skal telle ned fra 10 til 0, bruker vi en ``||loops: FOR-løkke ||`` som lar oss gjenta løkken akkurat så mange ganger vi ønsker. \n\nSett ``||loops: gjenta for indeks ||`` til å kjøres **fra 0 til 10**.\n\nInni ``||loops: gjenta for indeks ||`` skal vi bruke en ``||basic: vis tall ||`` til å vise ``||variables: teller ||``. Og for hver gang den har vist tallet, ``||variables: endre teller med -1 ||``.\n\nHusk å kjøre ``||functions: nedtelling||`` fra ``||basic: ved start||``. Denne blokken brukes for å si når funksjonen skal kjøres.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n}\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 2.2: -->\n\n## Oppgave 2: Få LED-lys til å lyse i 5 sek. etter nedtellingen\n\nFor å få LED til å lyse i 5 sek, kan vi flytte blokkene vi har i ``||basic: gjenta for alltid ||``, over til ``||functions: nedtelling ||``. \n\nEndre ``||basic: pause ||``  mellom LED PÅ og AV til 5000 ms. *(Fjern ``||basic: pause ||`` etter ``||pins: skriv digital P0 til 0||``.)*\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 2.3: -->\n\n## Oppgave 2: Bestemme når nedtelling skal starte\n\n``||functions: Funksjonen nedtelling||`` kjører når vi starter micro:biten. Hvis vi vil at den skal kjøres på nytt, kan vi f.eks. kalle den opp når vi ``||input: trykker på knapp A||``.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        basic.showNumber(teller)\n        teller += -1\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\ninput.onButtonPressed(Button.A, function () {\n    nedtelling()\n})\nlet teller = 0\nnedtelling()\n```\n\n<!-- Del 3: -->\n\n## Oppgave 3: Skriv til OLED-skjerm @unplugged\n\nNå skal vi se på hvordan vi kan bruke en Kitronik OLED-skjerm for å bedre vise dataene våre. \n\nSkjermen skal kobles til mellom CanSat og micro:bit.\n\n![OLED_Kitronik_liten.jpg](https://i.postimg.cc/mD2ry8kJ/OLED_Kitronik_liten.jpg)\n\n\n<!-- Del 3.1: -->\n\n## Oppgave 3: Sette opp OLED-skjerm\n\nFra biblioteket ``||kitronik_VIEW128x64: OLED-skjerm||``, hent blokkene ``||kitronik_VIEW128x64: skru AV OLED-skjerm||`` og ``||kitronik_VIEW128x64: Sett font størrelse til Normal||``. \n\nPlasser begge blokkene inn i ``||basic: ved start||``, og sett OLED-skjerm til ``||kitronik_VIEW128x64: PÅ||`` og sett font til ``||kitronik_VIEW128x64: Stor||``.\n\n```blocks\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Big)\n```\n\n\n<!-- Del 3.2: -->\n\n## Oppgave 3: Vise nedtelling på OLED-skjermen\n\nVi skal vise nedtellingen vi lagde i forrige oppgave på OLED-skjermen vi nå har satt opp.\n\nFjern blokken ``||basic: vis tall||`` ``||variables: teller||`` fra  funksjonen ``||functions: nedtelling||``. \n\nFor å vise noe på skjermen, bruk blokken ``||kitronik_VIEW128x64: vis ||``. Trykk på pluss(+) for å utvide blokken, og bestemme hvilken linje teksten skal skrives på:\n\n- ``||kitronik_VIEW128x64: vis||``, vis ``||variables: teller||`` ``||kitronik_VIEW128x64: på linje 1||``.\n\nFor å sørge for at skjermen alltid viser riktig verdi, må vi hele tiden oppdatere OLED-skjermen. Vi må derfor plassere``||kitronik_VIEW128x64: fjerne alt på skjermen||`` inni ``||basic: gjenta for alltid||``.\n\n```blocks\nfunction nedtelling () {\n    teller = 10\n    for (let indeks = 0; indeks <= 10; indeks++) {\n        kitronik_VIEW128x64.show(teller, 1)\n        teller += -1\n        basic.pause(1000)\n    }\n    pins.digitalWritePin(DigitalPin.P0, 1)\n    basic.pause(5000)\n    pins.digitalWritePin(DigitalPin.P0, 0)\n}\ninput.onButtonPressed(Button.A, function () {\n    nedtelling()\n})\nlet teller = 0\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Big)\nnedtelling()\nbasic.forever(function () {\n\tkitronik_VIEW128x64.clear()\n})\n\n```\n\n\n<!-- Del 4: -->\n\n## Oppgave 4: Lage et voltmeter @unplugged\n\nAlle sensorene vi skal koble til CanSat'en, gir oss en analog verdi. Noen av disse verdien må vi først regne om til en spenningsverdi, og så videre til den faktiske verdien vi kan bruke. \n\nVi må derfor lære hvordan man konverterer den analoge verdien vi får inn på micro:biten til en spenningsverdi.\n\n\n<!-- Del 4.1: -->\n\n## Oppgave 4: Lagre analog verdi fra sensor som variabel\n\nStart med å lage en ny funksjon: ``||functions: voltmeter||``.\n\nInni ``||functions: voltmeter||`` skal vi lage en ny variabel: ``||variables: analogVerdi||``. Sett ``||variables: analogVerdi||`` til å ``||pins: lese analog verdi fra P0||``.\n\n```blocks\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n```\n\n<!-- Del 4.2: -->\n\n## Oppgave 4: Vise analog verdi på OLED-skjermen\n\nInni funksjonen ``||functions: voltmeter||`` skal vi vise den analoge verdien vi får fra P0. \n\nFor å vise noe på skjermen, bruk blokken ``||kitronik_VIEW128x64: vis ||``. Trykk på pluss(+) for å utvide blokken, og bestemme hvilken linje teksten skal skrives på:\n\nFor å kunne vise både tekst og en variabel på samme linje, må vi hente ``||text: sett sammen ||`` fra biblioteket ``||text: Tekst ||``. Sett blokken inni ``||kitronik_VIEW128x64: vis ||``.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Analog: \". I den andre ruta, sette inn variabelen ``||variables: analogVerdi||``.\n\nFor å få programmet vårt til å kjøre funksjonen vi har laget, må vi legge inn blokken ``||functions: kjør voltmeter||`` inne fra ``||basic: gjenta for alltid||``. Legg oggså til en ``||basic: pause||`` på 500 ms mellom hver måling.\n\n```blocks\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n}\nbasic.forever(function () {\n    voltmeter()\n    basic.pause(500)\n})\n```\n\n\n<!-- Del 4.3: -->\n\n## Oppgave 4: Bestemme verdi på Uref\n\nNår vi skal regne ut spenningen vi måler, vil spenningen som micro:bit leverer til sensorene variere om vi får strøm fra USB eller batteri.\n\nSe tabell under for hva ``||variables: Uref||`` skal være :\n\n|   **  Spenning fra USB  **   | |   **  Spenning fra batteri  **   |\n| :------------: | | :------------: |\n| 3.2 | | 3.0 |\n\nLage en ny variabel: ``||variables: Uref||``.\n\n``||variables: Uref||`` skal settes inn i ``||basic: ved start||``, og sett den til verdien bestemt i tabellen over.\n\n\n```blocks\nlet Uref = 0\nUref = 3.2\n```\n\n\n<!-- Del 4.4: -->\n\n## Oppgave 4: Beregne spenning fra analog verdi\n\nVi har nå fått en analog verdi vi kan bruke for å regne ut spenningen over sensoren. For å gjøre dette, bruk formelen under:\n\n![Formel_spenning_fra_analogverdi_liten.png](https://i.postimg.cc/YSn2XtQv/Formel_spenning_fra_analogverdi_liten.png)\n\nLage en ny variabel: ``||variables: spenning||``.\n\nBruk formelen over for å sette ``||variables: spenning||`` til ( ``||variables: analogverdi||`` / 1024 ) * ``||variables: Uref||``.\n\n\n```blocks\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = analogVerdi / 1024 * Uref\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    basic.pause(500)\n}\n```\n\n\n<!-- Del 4.5: -->\n\n## Oppgave 4: Vis spenningsverdi på OLED-skjerm\n\nVi skal gjøre det samme som vi gjorde for å vise den analoge verdien på OLED-skjermen:\n\nHente ``||text: sett sammen ||`` fra biblioteket ``||text: Tekst ||``. Sett blokken inni en ny ``||kitronik_VIEW128x64: vis ||``. Utvid blokken og endre til å skrive på linje 2.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Spenning: \". I den andre ruta, sette inn variabelen ``||variables: spenning||``. Utvid til en tredje rute hvor du skriver \" V\".\n\nEndre skriftstørrelse på OLED-skjerm til ``||kitronik_VIEW128x64: Normal ||``.\n\n```blocks\nlet spenning = 0\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = analogVerdi / 1024 * Uref\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n    basic.pause(500)\n}\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\n```\n\n\n<!-- Del 4.6: -->\n\n## Oppgave 4: Runde av spenningsverdi\n\nNår du testet koden din, så du kanskje at det ble mange desimaler. Vi har ingen blokk som lar oss direkte avrunde til 2 desimaler. Det vi må gjøre er å lage en funksjon som tar den verdien vår med mange deimaler og returnerer en verdi med 2 desimaler. \n\nLag en ny funksjon: ``||functions: avrund||``. Legg til parameteret \"nummer\" på linja over når du lager funksjonen. Endre \"tall\" til \"verdi\". \n\nI den nye funksjonen skal vi multiplisere verdien vi henter fra formelen med 100, og deretter ``||math: avrund ||`` ``||variables: spenning||``. Det gir oss et heltall som er 100 ganger for stort. Hvis vi nå deler det nye tallet vårt på 100, vil vi få riktig tall, og ha flyttet kommategnet 2 plasser oppover slik at vi får en verdi med 2 desimaler.\n\nDenne verdien skal returneres tilbake til formelen vår.\n\n```blocks\nlet spenning = 0\nlet analogVerdi = 0\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = avrund(analogVerdi / 1024 * Uref)\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n    basic.pause(500)\n}\nfunction avrund (verdi: number) {\n    return Math.round(verdi * 100) / 100\n}\n```\n\n\n<!-- Del 5: -->\n\n## Oppgave 5: Lage et termometer med TMP36 @unplugged\n\nI denne oppgaven skal vi finne temperaturen fra en TMP36 temperatursensor. \n\nKoble opp kretsen på bildet under:\n\n![Oppgave_5_TMP36_Oppkobling_liten.png](https://i.postimg.cc/Jh67TRjX/Oppgave_5_TMP36_Oppkobling_liten.png)\n\n\n<!-- Del 5.1: -->\n\n## Oppgave 5: Regne om spenningsverdi til temperatur\n\nVi skal lage en ny funksjon: ``||functions: termometer||``.\n\nInne ``||functions: termometer||``, lage en ny variabel: ``||variables: temperatur||``.\n\nBruk denne formelen for å sette ``||variables: temperatur||`` til ( ``||variables: spenning||`` - 0.5 ) / 0.01\n\n```blocks\nfunction termometer () {\n    temperatur = (spenning - 0.5) / 0.01\n}\n```\n\n<!-- Del 5.2: -->\n\n## Oppgave 5: Vise termometer på OLED-skjerm\n\n Plasser en ``||text: sett sammen ||`` inni en ny ``||kitronik_VIEW128x64: show ||``. Utvid blokken og endre til å skrive på linje 3.\n\nI den første ruta til ``||text: sett sammen ||``, skriv \"Temperatur: \". I den andre ruta, sette inn variabelen ``||variables: temperatur||``. Utvid til en tredje rute hvor du skriver \" C\".\n\nKall opp funksjonen ``||functions: termometer||`` fra ``||basic: gjenta for alltid||``, og flytt ``||basic: pause 500 ms||`` fra ``||functions: voltmeter||`` til ``||basic: gjenta for alltid||``.\n\n```blocks\nfunction termometer () {\n    temperatur = (spenning - 0.5) / 0.01\n    kitronik_VIEW128x64.show(\"Temperatur: \" + temperatur + \" C\", 3)\n}\nbasic.forever(function () {\n    voltmeter()\n    termometer()\n    basic.pause(500)\n})\nfunction voltmeter () {\n    analogVerdi = pins.analogReadPin(AnalogPin.P0)\n    spenning = Math.trunc(analogVerdi / 1024 * Uref * 100) / 100\n    kitronik_VIEW128x64.clear()\n    kitronik_VIEW128x64.show(\"Analog: \" + analogVerdi, 1)\n    kitronik_VIEW128x64.show(\"Spenning: \" + spenning + \" V\", 2)\n}\n```\n\n<!-- Del 6: -->\n\n## Oppgave 6: Lag et barometer @unplugged\n\n#### Vi skal bruke en ``||BMP280: BMP280||`` sensor. \n\n![BME280.png](https://i.postimg.cc/ZYjVtVRH/BME280.png)\n\nDenne sensoren kan måle:\n\n- Temperatur\n- Trykk\n- Luftfuktighet\n- Duggpunkt\n\nFor å lage et barometer skal vi bruke ``||BMP280: trykk||``.\n\n\n<!-- Del 6.1: -->\n\n## Oppgave 6: Koble opp og lese av fra BME280\n\nFor å få BME280 til å snakke med CanSat, skal vi sette opp to blokken inn i ``||basic: ved start||`` fra biblioteket ``||BMP280: BMP280||``:\n\n- ``||BME280: Power On||``\n- ``||BME280: set address 0x76||``\n\nVidere, lage en ny funksjon: ``||functions: BMP280_sensor||``.\n\nInne ``||functions: BME280_sensor||``, sett opp en ny variabel: ``||variables: trykk||``. Sett ``||variables: trykk||`` til ``||BME280: pressure||`` (fra biblioteket BME280).\n\n```blocks\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\nBME280.PowerOn()\nBME280.Address(BME280_I2C_ADDRESS.ADDR_0x76)\nfunction BME280_sensor () {\n    trykk = BME280.pressure(BME280_P.Pa)\n}\n```\n\n<!-- Del 6.2: -->\n\n## Oppgave 6: Skrive lufttrykk på OLED-skjerm\n\nKopier koden vi har brukt før for å skrive til OLED-skjerm.\n\nI den første ruta, skriv \"Trykk: \". I den andre ruta, sette inn ``||variables: trykk||``. I den tredje, skriv \" Pa\". Skriv til linje 4.\n\n```blocks\nUref = 3.2\nkitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(true))\nkitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\nBME280.PowerOn()\nBME280.Address(BME280_I2C_ADDRESS.ADDR_0x76)\nfunction barometer () {\n    trykk = BME280.pressure(BME280_P.Pa)\n    kitronik_VIEW128x64.show(\"Trykk: \" + trykk + \" Pa\", 4)\n}\n```\n\n\n<!-- Del 7: -->\n\n## Ferdig! \n\nGratulerer! Du har nå løst alle oppgavene du trenger for å kunne programmere en fullstendig versjon av CanSat med bruk av micro:bit!\n\n```blocks\ninput.onPinPressed(TouchPin.P0, function () {\n\n})\nradio.onReceivedNumber(function (receivedNumber) {\n\n})\ninput.onPinReleased(TouchPin.P0, function () {\n\n})\ninput.onLogoEvent(TouchButtonEvent.Pressed, function () {\n\n})\ninput.onButtonPressed(Button.A, function () {\n    if (input.buttonIsPressed(Button.A)) {\n        input.setAccelerometerRange(AcceleratorRange.OneG)\n        input.setSoundThreshold(SoundThreshold.Loud, 128)\n    } else if (input.acceleration(Dimension.X) == 0) {\n        // skjerm blokker\n        led.plot(led.brightness(), 0)\n        led.toggle(led.pointBrightness(0, 0), 0)\n        led.unplot(0, 0)\n        led.plotBarGraph(\n            0,\n            0\n        )\n        led.plotBrightness(0, 0, 255)\n        led.setBrightness(255)\n        led.enable(false)\n        led.stopAnimation()\n        led.setDisplayMode(DisplayMode.BlackAndWhite)\n    } else if (input.lightLevel() < 0) {\n        // radio blokker\n        radio.setGroup(1)\n        radio.sendNumber(0)\n        radio.sendValue(\"name\", 0)\n        radio.sendString(\"\")\n        radio.setTransmitPower(7)\n        radio.setTransmitSerialNumber(true)\n        radio.setFrequencyBand(0)\n        radio.raiseEvent(\n            EventBusSource.MICROBIT_ID_BUTTON_A,\n            EventBusValue.MICROBIT_EVT_ANY\n        )\n    } else if (input.pinIsPressed(TouchPin.P0)) {\n\n    } else if (input.isGesture(Gesture.Shake)) {\n\n    } else if (input.compassHeading() == 0) {\n\n    } else if (input.temperature() == 0) {\n\n    } else if (input.logoIsPressed()) {\n\n    } else if (\"\" == \"\") {\n\n    } else if (input.soundLevel() < input.magneticForce(Dimension.X) && input.rotation(Rotation.Pitch) == input.runningTime()) {\n\n    } else if (!(true) || false) {\n\n    } else if (input.runningTimeMicros() == 0 || 0 == 0) {\n        music.play(music.stringPlayable(\"- - - - - - - - \", 120), music.PlaybackMode.UntilDone)\n        music.play(music.tonePlayable(262, music.beat(BeatFraction.Whole)), music.PlaybackMode.UntilDone)\n        music.ringTone(262)\n        music.rest(music.beat(BeatFraction.Whole))\n        music.setVolume(music.volume())\n        music.stopAllSounds()\n        music.changeTempoBy(music.beat(BeatFraction.Whole))\n        music.setTempo(music.tempo())\n        music._playDefaultBackground(music.builtInPlayableMelody(Melodies.Dadadadum), music.PlaybackMode.InBackground)\n        music.stopMelody(MelodyStopOptions.All)\n        music.play(music.builtinPlayableSoundEffect(soundExpression.giggle), music.PlaybackMode.UntilDone)\n        music.play(music.createSoundExpression(WaveShape.Sine, 5000, 0, 255, 0, 500, SoundExpressionEffect.None, InterpolationCurve.Linear), music.PlaybackMode.UntilDone)\n        music.setBuiltInSpeakerEnabled(false)\n    } else if (music.isSoundPlaying()) {\n        tekst = (\"\" + \"this\".split(\"\") + String.fromCharCode(0).charCodeAt(0)).length\n        tekst = parseFloat(\"123\")\n        tekst = convertToText(0).charAt(0).substr(0, \"this\".compare(\"\")).indexOf(\"\")\n    } else if (led.point(0, 0)) {\n\n    } else if (BMP280.temperature() == BMP280.pressure()) {\n        BMP280.PowerOn()\n        BMP280.PowerOff()\n        BMP280.Address(BMP280_I2C_ADDRESS.ADDR_0x76)\n    } else if (Math.randomBoolean()) {\n        basic.showNumber(0 * 0 - Math.PI + 0 / (Math.min(Math.max(Math.sqrt(Math.round(randint(0, 10))), Math.abs(Math.constrain(0, 0, 0))), Math.map(0, 0, 1023, 0, 4)) % 1))\n    } else if (\"this\".includes(\"\")) {\n\n    } else if (\"this\".isEmpty()) {\n\n    } else if (pins.digitalReadPin(pins.map(\n        0,\n        0,\n        1023,\n        0,\n        4\n    )) == pins.analogReadPin(AnalogPin.P0)) {\n        pins.digitalWritePin(DigitalPin.P0, 0)\n        pins.analogWritePin(AnalogPin.P0, 1023)\n        pins.analogSetPeriod(AnalogPin.P0, 20000)\n        pins.setAudioPin(DigitalPin.P0)\n        pins.setAudioPinEnabled(false)\n        pins.servoWritePin(AnalogPin.P0, 180)\n        pins.servoSetPulse(AnalogPin.P0, 1500)\n    } else if (control.millis() == 0) {\n        control.waitForEvent(control.eventValue(), 0)\n        control.reset()\n        control.waitMicros(control.eventTimestamp())\n        control.raiseEvent(\n            EventBusSource.MICROBIT_ID_BUTTON_A,\n            EventBusValue.MICROBIT_EVT_ANY\n        )\n    } else {\n        serial.writeLine(serial.readLine())\n        serial.writeNumber(0)\n        serial.writeValue(\"\" + serial.readUntil(serial.delimiters(Delimiters.NewLine)) + serial.readString(), 0)\n        serial.writeString(\"\" + (serial.readBuffer(0)))\n        serial.writeNumbers([0, 1])\n        serial.redirect(\n            SerialPin.P0,\n            SerialPin.P1,\n            BaudRate.BaudRate115200\n        )\n        serial.redirectToUSB()\n        serial.setTxBufferSize(32)\n        serial.setRxBufferSize(32)\n        serial.setWriteLinePadding(0)\n        serial.setBaudRate(BaudRate.BaudRate115200)\n    }\n})\ninput.onGesture(Gesture.Shake, function () {\n    BMP280.temperature()\n    BMP280.pressure()\n    BMP280.PowerOn()\n    BMP280.PowerOff()\n    BMP280.Address(BMP280_I2C_ADDRESS.ADDR_0x76)\n})\nfunction doSomething() {\n\n}\nradio.onReceivedString(function (receivedString) {\n\n})\ninput.onSound(DetectedSound.Loud, function () {\n\n})\nradio.onReceivedValue(function (name, value) {\n\n})\ncontrol.onEvent(EventBusSource.MICROBIT_ID_BUTTON_A, EventBusValue.MICROBIT_EVT_ANY, function () {\n\n})\nserial.onDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n\n})\npins.onPulsed(DigitalPin.P0, PulseValue.High, function () {\n\n})\nmusic.onEvent(MusicEvent.MelodyNotePlayed, function () {\n\n})\nlet teksttabell: string[] = []\nlet tabell: number[] = []\nlet tekst = 0\n// basis blokker\nbasic.showNumber(0)\nbasic.showLeds(`\n    . . . . .\n    . . . . .\n    . . # . .\n    . . . . .\n    . . . . .\n    `)\nbasic.showIcon(IconNames.Heart)\nbasic.showString(\"Hello!\")\nbasic.clearScreen()\nbasic.pause(100)\nbasic.showArrow(ArrowNames.North)\nradio.setGroup(1)\nradio.sendNumber(0)\nradio.sendValue(\"name\", 0)\nradio.sendString(\"\")\nradio.setTransmitPower(7)\nradio.setTransmitSerialNumber(true)\nradio.setFrequencyBand(0)\nradio.raiseEvent(\n    EventBusSource.MICROBIT_ID_BUTTON_A,\n    EventBusValue.MICROBIT_EVT_ANY\n)\nloops.everyInterval(500, function () {\n\n})\nbasic.forever(function () {\n    let list: number[] = []\n    for (let index = 0; index < 4; index++) {\n\n    }\n    // løkker blokker\n    while (false) {\n\n    }\n    for (let verdi of tabell) {\n\n    }\n    for (let indeks = 0; indeks <= 4; indeks++) {\n\n    }\n    for (let index = 0; index < 5; index++) {\n\n    }\n    for (let index = 0; index < radio.receivedPacket(RadioPacketProperty.SignalStrength); index++) {\n        continue;\n        break;\n    }\n    // Logikk blokker\n    if (true) {\n\n    }\n    if (true) {\n\n    } else {\n\n    }\n    kitronik_VIEW128x64.controlDisplayOnOff(kitronik_VIEW128x64.onOff(false))\n    kitronik_VIEW128x64.setFontSize(kitronik_VIEW128x64.FontSelection.Normal)\n    kitronik_VIEW128x64.refresh()\n    kitronik_VIEW128x64.invert(kitronik_VIEW128x64.onOff(false))\n    kitronik_VIEW128x64.show(0)\n    kitronik_VIEW128x64.setPixel(0, 0)\n    kitronik_VIEW128x64.plot(0)\n    kitronik_VIEW128x64.drawLine(kitronik_VIEW128x64.LineDirectionSelection.horizontal, 10, 0, 0)\n    kitronik_VIEW128x64.drawRect(60, 30, 0, 0)\n    kitronik_VIEW128x64.clearLine(1)\n    kitronik_VIEW128x64.clearPixel(0, 0)\n    kitronik_VIEW128x64.clear()\n    // funksjoner blokker\n    doSomething()\n    // tabeller blokker\n    tabell = [tabell.length, 2, 3]\n    teksttabell = [\"ei / en / ett\", \"b\", \"c\"]\n    tabell[list.removeAt(list._pickRandom())] = list.shift()\n    tabell.push(tabell[list.pop()])\n    tabell.pop()\n    tabell = []\n    tabell[0] = 0\n    list.push(list.unshift(0))\n    list.pop()\n    tabell.shift()\n    list.unshift(0)\n    list.insertAt(0, list.indexOf(0))\n    list.removeAt(0)\n    list.reverse()\n})\nbasic.forever(function () {\n\n})\ncontrol.inBackground(function () {\n\n})\n```\n\n```package\noled-skjerm=github:oysa88/oled-skjerm\nBME280=github:oysa88/BME280\n```","pxt.json":"{\n    \"name\": \"CanSat Øving Tutorial NY\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"cansat-tutorial.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[],"lastSaveTime":1770128458142}